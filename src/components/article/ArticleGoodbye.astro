<aside
  class={`
    relative w-screen
    left-1/2 right-1/2 -ml-[50vw] -mr-[50vw]
    pt-8 pb-2 mt-16 bg-goodbye backdrop-blur-sm
  `}
>
  <div class="max-w-screen-xs px-4 mx-auto">
    <p>Gracias por leer :></p>
    <p>
      Recuerda suscribirte a mi <a href="/rss">RSS</a> o <a href="/newsletter"
        >newsletter</a
      > para estar atento a mis futuras divagaciones.
    </p>
    <p class="mt-8! mb-0!">
      Un saludo.<br />â€” Michelangelo
    </p>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="125"
      height="83"
      fill="none"
      stroke="currentColor"
      stroke-linecap="round"
      stroke-width="2"
      viewBox="0 0 125 83"
      id="signature"
      stroke-dasharray="400"
      stroke-dashoffset="400"
      class={`
        size-32 text-foreground/80
        data-[anim]:animate-[dash_1.6s_ease-out_100ms_forwards]
      `}
    >
      <path
        d="M1 81.806c4.183-7.32 7.472-15.205 11.476-22.632 7.912-14.676 16.343-29.148 25.36-43.176 3.041-4.73 12.136-18.916 9.47-13.964-3.191 5.927-6.591 11.72-9.63 17.736-5.16 10.214-10.039 20.669-13.884 31.46-.955 2.678-3.216 9.715-.642 8.506 4.911-2.307 9.318-10.408 12.279-14.445 5.881-8.021 11.28-16.402 17.414-24.237 1.586-2.025 6.526-7.797 5.458-5.457-2.269 4.966-5.11 9.732-7.705 14.526-1.065 1.968-14.67 22.219-7.784 23.915 4.58 1.129 9.08-3.822 12.198-6.42 1.252-1.043-2.578 2.633-2.407 4.253.158 1.506 8.279 1.004 9.79 1.044 6.382.168 8.713-3.607 12.28-8.507 2.674-3.675 5.407-7.331 8.586-10.594 2.297-2.357 1.266-.868.16.723-2.904 4.18-8.79 11.695-6.981 17.334 1.246 3.886 6.467-.763 8.346-1.685 2.69-1.32 5.89 1.696 8.667 2.247 9.664 1.917 20.604-.335 30.336-.963"
      ></path>
    </svg>
  </div>
</aside>

<style>
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
</style>

<script>
  import { $ } from '@/lib/dom'

  const signatureElem = $('#signature')!

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach(({ isIntersecting }) => {
        if (!isIntersecting) return
        signatureElem.setAttribute('data-anim', 'true')
        observer.unobserve(signatureElem)
      })
    },
    {
      root: null,
      rootMargin: '0px',
      threshold: 1
    }
  )
  observer.observe(signatureElem)
</script>
