<!DOCTYPE html><html lang="es"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v4.16.16"><meta http-equiv="X-UA-Compatible" content="IE=7"><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"><link rel="shortcut icon" href="favicon.svg" type="image/x-icon"><link rel="canonical" href="https://imangelo.dev/como-hacer-un-videojuego-con-pico-8/"><meta name="robots" content="index, follow"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="RSS Feed de imangelo.dev" href="/rss.xml"><title>Cómo hacer un videojuego con PICO-8 | Michelangelo Valderrama</title><meta name="description" content="Tutorial de cómo programar un videojuego en PICO-8."> <meta property="twitter:title" content="Cómo hacer un videojuego con PICO-8 | Michelangelo Valderrama"><meta property="twitter:description" content="Tutorial de cómo programar un videojuego en PICO-8."><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@imangelo84"><meta property="twitter:creator" content="@imangelo84"><meta property="twitter:image" content="/images/pico-8.webp"><meta property="twitter:image:alt" content="Cómo hacer un videojuego con PICO-8"> <meta property="og:title" content="Cómo hacer un videojuego con PICO-8 | Michelangelo Valderrama"><meta property="og:type" content="website"><meta property="og:url" content="https://imangelo.dev/como-hacer-un-videojuego-con-pico-8/"><meta property="og:locale" content="es_ES"><meta property="og:description" content="Tutorial de cómo programar un videojuego en PICO-8."><meta property="og:site_name" content="Michelangelo Valderrama"><meta property="og:image" content="/images/pico-8.webp"><meta property="og:image:alt" content="Cómo hacer un videojuego con PICO-8"><meta property="og:image:width" content="920"><meta property="og:image:height" content="430"> <meta property="article:publisher" content="https://imangelo.dev/"> <meta property="article:author" content="Michelangelo Valderrama Vivanco"> <meta property="article:tag" content="pico-8"> <meta property="article:published_time" content="Mon Mar 06 2023 01:00:00 GMT+0100 (Central European Standard Time)"> <meta property="article:modified_time" content="Mon Mar 06 2023 01:00:00 GMT+0100 (Central European Standard Time)"> <script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://imangelo.dev/como-hacer-un-videojuego-con-pico-8/","name":"https://localhost:4321"},"headline":"Cómo hacer un videojuego con PICO-8","description":"Tutorial de cómo programar un videojuego en PICO-8.","image":["/images/pico-8.webp"],"datePublished":"2023-03-06T00:00:00.000Z","dateModified":"2023-03-06T00:00:00.000Z","author":[{"@type":"Person","name":"Michelangelo Valderrama Vivanco","url":"https://imangelo.dev/"}],"publisher":{"@type":"Organization","name":"Michelangelo Valderrama","logo":{"@type":"ImageObject","url":"/images/pico-8.webp"}}}</script> <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Cómo hacer un videojuego con PICO-8","image":["/images/pico-8.webp"],"datePublished":"2023-03-06T00:00:00.000Z","dateModified":"2023-03-06T00:00:00.000Z","author":[{"@type":"Person","name":"Michelangelo Valderrama Vivanco","url":"https://imangelo.dev/"}]}</script> <script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://imangelo.dev/como-hacer-un-videojuego-con-pico-8/","name":"Cómo hacer un videojuego con PICO-8"}}]}</script><link rel="stylesheet" href="/_astro/_article_.DBc673nX.css">
<style>h1[data-astro-cid-h4kpgsl2]{margin:0}p[data-astro-cid-h4kpgsl2]{font-size:.875rem;line-height:1.25rem;color:hsl(var(--im-muted-foreground))}
.quote[data-astro-cid-a2ihmirl]{font-size:1.25rem;line-height:1.75rem;color:hsl(var(--im-foreground) / .8)}.author[data-astro-cid-a2ihmirl]{margin-bottom:0;text-align:right;font-size:.875rem;line-height:1.25rem;color:hsl(var(--im-accent-foreground))}
h1[data-astro-cid-h4kpgsl2]{margin:0}p[data-astro-cid-h4kpgsl2]{font-size:.875rem;line-height:1.25rem;color:hsl(var(--im-muted-foreground))}
</style><script type="module">const s=(t,e)=>document.querySelector(t),i=(t,e)=>document.querySelectorAll(t),r=s("#art-wid-dk-cont"),u=s("#end-of-article"),b=new IntersectionObserver(t=>{t.forEach(({isIntersecting:e})=>{r.setAttribute("data-hidden",e+""),r.setAttribute("aria-hidden",e+"")})},{root:null,rootMargin:"0px",threshold:1});b.observe(u);const c=i("h1, h2"),a=i("a[data-toc-link]"),f={root:null,rootMargin:"0px 0px -500px 0px",threshold:1},g=t=>{t.forEach(({isIntersecting:e,target:{id:o}})=>{e&&a.forEach(n=>{const{headingId:d}=n.dataset,l=d===o,h=c[0].id===o;a.item(0).setAttribute("data-hidden",h+""),n.setAttribute("data-active",l+"")})})},v=new IntersectionObserver(g,f);c.forEach(t=>{v.observe(t)});
</script></head> <body class="relative bg-background text-foreground font-sans overflow-x-hidden">   <main class="container min-h-svh pb-24 pt-12 flex flex-col pb-24"> <header> <nav class="flex items-end justify-between mb-12"> <a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer text-muted-foreground border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground pb-1 data-[active=&#x27;true&#x27;]:text-accent-foreground data-[active=&#x27;true&#x27;]:border-b-accent-foreground" about="_self" data-active="false" href="/">Inicio</a> <div class="border-b flex-1"></div> <a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground pb-1 ml-auto text-accent-foreground border-b-accent-foreground" about="_self" href="//como-hacer-un-videojuego-con-pico-8/">Artículo</a> </nav> </header> <article class="flex-1">  <aside id="art-wid-dk-cont" class="
    fixed
    left-0 right-0 top-32
    hidden lg:block
    pointer-events-none
    transition-opacity duration-base
    data-[hidden=true]:opacity-0
  "> <div class="max-w-screen-2xl mx-auto flex justify-between"> <article class="ml-8 max-w-48"> <ul class="pointer-events-auto"> <li class="mb-3"> <a class="inline-flex items-center justify-center whitespace-nowrap duration-base cursor-pointer text-muted-foreground border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground border-none text-wrap my-1 sm:my-0.5 sm:text-sm data-[active=true]:text-foreground data-[active=true]:font-medium focus-visible:opacity-100 transition-all duration-base data-[hidden=true]:opacity-0 data-[hidden=true]:pointer-events-none" about="_self" data-toc-link="true" data-heading-id="title" href="#" data-hidden="true">Cómo hacer un videojuego con PICO-8</a> </li> <li><a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer text-muted-foreground border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground border-none text-wrap my-1 sm:my-0.5 sm:text-sm data-[active=true]:text-foreground data-[active=true]:font-medium focus-visible:opacity-100" about="_self" data-toc-link="true" data-heading-id="1-introducción" href="#1-introducción">1. Introducción</a></li><li><a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer text-muted-foreground border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground border-none text-wrap my-1 sm:my-0.5 sm:text-sm data-[active=true]:text-foreground data-[active=true]:font-medium focus-visible:opacity-100" about="_self" data-toc-link="true" data-heading-id="2-fundamentos-de-programación" href="#2-fundamentos-de-programación">2. Fundamentos de Programación</a></li><li><a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer text-muted-foreground border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground border-none text-wrap my-1 sm:my-0.5 sm:text-sm data-[active=true]:text-foreground data-[active=true]:font-medium focus-visible:opacity-100" about="_self" data-toc-link="true" data-heading-id="3-squashy" href="#3-squashy">3. Squashy</a></li><li><a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer text-muted-foreground border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground border-none text-wrap my-1 sm:my-0.5 sm:text-sm data-[active=true]:text-foreground data-[active=true]:font-medium focus-visible:opacity-100" about="_self" data-toc-link="true" data-heading-id="4-final" href="#4-final">4. Final</a></li><li><a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer text-muted-foreground border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground border-none text-wrap my-1 sm:my-0.5 sm:text-sm data-[active=true]:text-foreground data-[active=true]:font-medium focus-visible:opacity-100" about="_self" data-toc-link="true" data-heading-id="referencias" href="#referencias">Referencias</a></li> </ul> </article>  </div> </aside>  <header class="mb-6" data-astro-cid-h4kpgsl2> <h1 data-astro-cid-h4kpgsl2>Cómo hacer un videojuego con PICO-8</h1> <p data-astro-cid-h4kpgsl2> <time datetime="06 mar 2023" data-astro-cid-h4kpgsl2>06 mar 2023</time> </p> <img src="/images/pico-8.webp" credits="https://www.steamgriddb.com/grid/163642" alt="Cómo hacer un videojuego con PICO-8" class="mt-6 mb-18" width="920" height="430" loading="lazy" decoding="async"> </header>  <article id="article-content" class="prose mb-16">  <h2 id="1-introducción">1. Introducción</h2>
<p><strong>PICO-8</strong> es un motor de videojuegos relativamente conocido creado por Joseph White, aka <em>zep</em>. Con PICO-8, Joseph quería crear una consola con la que poder jugar videojuegos sencillos y a la vez poder desarrollarlos en la misma consola, como en una Commodore 64. Buscaba que fuera fácil de manejar, simple y, sobre todo, autosuficiente: que contenga todo lo necesario para desarrollar un videojuego sin necesidad de usar programas externos. Así nació el concepto de <em>fantasy console</em>, que vendría a ser un emulador de una consola que no
existe, con todas las limitaciones que podría tener. Debido al minimaslismo y su potencial, PICO-8 se volvió muy usado en Game Jams. Puede entrar a su <a href="https://www.lexaloffle.com/pico-8.php" rel="noopener noreferrer">página <span>oficial<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10v10M7 17 17 7"></path></svg></span></a> y jugar algunos videojuegos hechos por la comunidad (figura 1).</p>
<figure><p><img  src="/_astro/screenshot-de-poom.Dl_eb8TD_1APJVb.webp" alt="Figura 1: Screenshot de Poom" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 1: Screenshot de Poom</figcaption></figure>
<p>Lo que nos interesa de todo esto es que, el año pasado, Joseph publicó una versión de PICO-8 totalmente gratuita que funciona en la web, que es con la que voy a trabajar durante todo este artículo.</p>
<p>Para hacer un videojuego se necesitan conocimientos en diversas materias, pero aquí solo nos centraremos en la programación. Si no ha programado nada en su vida, no se preocupe pues haré una breve y rápida introducción. No indagaré en cuestiones muy técnicas y me centraré principalmente en lo que se vaya usar para el juego que se planea desarrollar al final de este artículo. Por lo pronto, lo único que tiene que saber es que va a programar en Lua.</p>
<h2 id="2-fundamentos-de-programación">2. Fundamentos de Programación</h2>
<p>Entre al siguiente enlace: <a href="https://www.pico-8-edu.com" rel="noopener noreferrer">https://www.pico-8-edu.com<span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10v10M7 17 17 7"></path></svg></span></a>. Al principio solo verá unas letras blancas sobre un fondo negro (figura 2), está en el <strong>Modo Comando</strong>. Si escribe <code>help</code> verá una lista de comandos y, abajo del todo, verá que dice que presione <code>ESC</code> para cambiar al <strong>Modo Editor</strong>. Si hace lo que se dice verá una pantalla tal y como se muestra en la figura 3. También verá diferentes pestañas, en la que está usted ahora mismo es el <strong>Editor de Código</strong>.</p>
<figure><p><img  src="/_astro/terminal-pico8.BooIIxHv_Z8ky0d.webp" alt="Figura 2: Terminal de PICO-8" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 2: Terminal de PICO-8</figcaption></figure>
<figure><p><img  src="/_astro/editor-de-codigo.Cb_Y7YF7_NsyQJ.webp" alt="Figura 3: Editor de código" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 3: Editor de código</figcaption></figure>
<h3 id="21-funciones-y-tipos-de-datos">2.1. Funciones y tipos de datos</h3>
<p>A continuación, escriba lo siguiente (figura 4):</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.tdcb7.css"><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"hello, world!"</span><span style="--0:#5C6166">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="print(&#x22;hello, world!&#x22;)"><div></div></button></div></figure></div>
<p>No utilice mayúsculas, el tipo de fuente de PICO-8 por defecto solo utiliza las minúsculas para las letras, en cambio las mayúsculas están reservadas para otros caracteres especiales. Por ahora, presione <code>ESC</code>, escriba <code>run</code> en la línea de comandos y presiones la tecla <code>ENTER</code>. Tendría que ver algo como se muestra en la figura 5, si es así, ¡felicidades!, ahora puede presumir oficialmente de haber programado algo, sino es así revise si ha seguido bien todos lo pasos.</p>
<figure><p><img  src="/_astro/hola-mundo.BWupo0o6_Z1CojkD.webp" alt="Figura 4: Hello, world!" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 4: Hello, world!</figcaption></figure>
<figure><p><img  src="/_astro/ejecutar-programa.BdOVLtDO_Z2f6zpL.webp" alt="Figura 5: Ejecutar un programa" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 5: Ejecutar un programa</figcaption></figure>
<div dir="auto" class="callout" style="--callout-color-light: var(--im-callout-note); --callout-color-dark: var(--im-callout-note);"><div class="callout-title"><div class="callout-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">Nota</div></div><div class="callout-content"><p>A partir de ahora, en los bloques de código si al final del todo aparece <code>> run</code> y después le siguen otras lineas significará que se ha ejecutado el programa y en las líneas se mostrará lo que tendría que salirle en pantalla.</p></div></div>
<p>A lo mejor se está preguntando: ¿Qué es lo que acaba de pasar? Para ello necesita saber que en programación es fundamental el concepto de <em>función</em>. Puede que le hayan venido flashbacks de sus clases de matemáticas, pero no tema, no necesita saber exactamente que es una función en matemáticas para entender estas. En programación, una función es una sección de código dedicado ha realizar cierta tarea (o función), estas reciben parámetros y retornan valores. Puede reconer funciones facilmente pues siempre llevan paréntesis. Lo que hizo hace un momento fue llamar a la función <code>print</code>, le pasó un parámetro, <code>hello, world!</code>, y, cuando el programa fue ejecutado (<code>> run</code>), esta función desempeñó el papel por el cual fue creada: imprimir en pantalla lo que le pasen por parámetro.</p>
<p>Notese que el parámetro que recibe <code>print</code> va entre comillas. Si escribe <code>print(hello, world!)</code> y ejecuta el programa, verá que le sale el siguiente error:</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="ansi"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#d787af">syntax error line 1 (tab 0)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#5c6166">print(hello, world!)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#5c616680">')' expected near '!'</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="syntax error line 1 (tab 0)print(hello, world!)&#x27;)&#x27; expected near &#x27;!&#x27;"><div></div></button></div></figure></div>
<p>En los lenguajes de programación hay diferentes <em>tipos de datos</em>, uno de ellos son los <code>string</code> —una manera <em>fancy</em> de llamar a los textos de toda la vida—. Además de los <code>string</code>, existen los datos de tipo <code>int</code> —de <em>integer</em>— que son los números enteros (…, -2, -1, 0, 1, 2,…), y los de tipo <code>float</code> —de coma flotante— que son los números con decimales. El asunto es que los lenguajes de programación distinguen los datos de tipo <code>string</code> gracias a las comillas, así saben que eso es un bloque de texto y lo interpretan como tal.</p>
<p>Ahora que conoce diferentes tipos de datos, unos ejemplos de como operar con cada uno de ellos. Escriba lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"hello, world!"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">/</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">*</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">^</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">%</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="print(&#x22;hello, world!&#x22;)print(2 + 3)print(2 / 3)print(2 * 3)print(2 ^ 3)print(2 % 3)"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="ansi"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5c616680">> run</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#5c6166">hello, world!</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#5c6166">5</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#5c6166">0.6667</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#5c6166">6</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#5c6166">8</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span style="--0:#5c6166">2</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> runhello, world!50.6667682"><div></div></button></div></figure></div>
<p>Los <strong>operadores</strong> son los símbolos que realizan operaciones matemáticas: la suma, la resta, la división, la multiplicación y la exponenciación; el último operador puede parecer un poco misterioso pero simplemente es el resto de dividir 2 por 3.</p>
<p>Ahora escriba:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">((</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">*</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">--(int - int) * int</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">((</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">^</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">..</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">" es de tipo int"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">--(int + int) ^ int + string</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="print((2 - 3) * 2)--(int - int) * intprint((2 + 2) ^ 3 .. &#x22; es de tipo int&#x22;)--(int + int) ^ int + string"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="ansi"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5c616680">> run</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#5c6166">-2</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#5c6166">64 es de tipo int</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> run-264 es de tipo int"><div></div></button></div></figure></div>
<p>Hay tres cosas importantes en lo que acaba de escribir:</p>
<ol>
<li>La primera es que, al igual que en matemáticas, los paréntesis agrupan.</li>
<li>La segunda es que para comentar código —poner anotaciones— se utilizan dos guiones: <code>--comentario</code> (todo lo que siga a los guiones no será interpretado como parte del programa y, por tanto, no será ejecutado).</li>
<li>Por último, cuando entre dos tipos de datos se colocan dos puntos, estos se concatenan —al menos en Lua—, es decir: se <em>enlazan</em>. En este caso un <code>int</code> (<code>64</code>) con un <code>string</code> (<code>es de tipo int</code>).</li>
</ol>
<p>Existe otro tipo de dato, los de tipo <code>bool</code>. Pero de ellos hablaré más tarde.</p>
<h3 id="22-variables">2.2. Variables</h3>
<p>Una <strong>variable</strong> es, en esencia, una forma de almacenar datos. Esta se compone del nombre de la variable y el dato que almacena. Para declarar una variable se escribe el nombre de la variable, el signo de igual y el dato que se quiere que almacene: <code>x = 3</code>.</p>
<p>Aunque hay similitud entre una variable y una incógnita en matemáticas, estas son conceptualmente diferentes. La expresión <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">x=3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> significa que la incógnita <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> es equivalente al número 3. No parece ser muy diferente, pero en matemáticas no tiene sentido la expresión <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mi>x</mi><mo>+</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">x = x + 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>, pues no hay ningún valor que sea igual a él mismo más tres. En cambio, en programación la expreción <code>x = x + 3</code> significa que se le asigna a la variable <code>x</code> el valor anterior de <code>x</code> más 3. Esta expresión no solo no es absurda, sino que es tan fundamental que se ha inventado una manera corta de escribirlo: <code>x += 3</code>.</p>
<p>Ahora, escriba lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">x </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#5C6166">y </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">10</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"x: "</span><span style="--0:#ED9366">..</span><span style="--0:#5C6166">x)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"y: "</span><span style="--0:#ED9366">..</span><span style="--0:#5C6166">y)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"x + y = "</span><span style="--0:#ED9366">..</span><span style="--0:#5C6166">x </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> y)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="x = 3y = 10print(&#x22;x: &#x22;..x)print(&#x22;y: &#x22;..y)print(&#x22;x + y = &#x22;..x + y)"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="ansi"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5c616680">> run</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#5c6166">x: 3</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#5c6166">y: 10</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#5c6166">x + y = 13</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> runx: 3y: 10x + y = 13"><div></div></button></div></figure></div>
<p>Recuerde que con <code>..</code> está concatenando, en este caso <code>x: </code> y el valor de la variable <code>x</code>, que en este caso es <code>3</code>.</p>
<h3 id="23-condicionales">2.3. Condicionales</h3>
<p>Otro concepto sustancial: los <strong>condicionales</strong>. Existen tres tipos de condicionales:</p>
<ol>
<li>los <code>if</code> (si),</li>
<li>los <code>else</code> (sino) y</li>
<li>los <code>elseif</code> (sino si).</li>
</ol>
<p>La razón de existencia de los condicionales es evaluar casos: <em>si se cumple esto, entonces se hará aquello; sino, se hará esto otro</em>.</p>
<p>Escriba lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">n </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">2</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> n </span><span style="--0:#ED9366">==</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">4</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"n es igual a 4"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#FA8D3E">else</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"n no es igual a 4"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="n = 2if n == 4 then  print(&#x22;n es igual a 4&#x22;)else  print(&#x22;n no es igual a 4&#x22;)end"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="ansi"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5c616680">> run</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#5c6166">n no es igual a 4</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> runn no es igual a 4"><div></div></button></div></figure></div>
<p>El código se leería como: <em>si <code>n</code> es igual a 4, entonces se llama a la función <code>print</code> para imprimir en pantalla <code>n es igual a 4</code>; sino (todos los casos en los que <code>n</code> no sea igual a 4), se imprimirá en pantala <code>n no es igual a 4</code></em>.</p>
<p>Notese que el símbolo <code>=</code> indica <em>asignación</em>, por el contrario, el símbolo <code>==</code> indica <em>comparación</em>. Esta comparación solo puede tener dos resultados: <code>true</code> o <code>false</code>, los conocidos como datos de tipo <code>bool</code>. Si <code>n</code> no es igual a 4, entonces la sentencia <code>n == 4</code> dará <code>false</code> y cuando el <code>if</code> lo detecte sabrá que la condición no se cumple y se pasará a la siguiente instrucción, en
este caso el <code>else</code>.</p>
<p>Habrá notado que en el ejemplo anterior no se hizo uso de uno de los tres tipos de condicionales. No se preocupe pues ahora escribirá lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">n </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">4</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> n </span><span style="--0:#ED9366">==</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"n es igual a 2"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#FA8D3E">elseif</span><span style="--0:#5C6166"> n </span><span style="--0:#ED9366">==</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"n es igual a 3"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#FA8D3E">else</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"n no es igual a 2 o a 3"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="n = 4if n == 2 then  print(&#x22;n es igual a 2&#x22;)elseif n == 3 then  print(&#x22;n es igual a 3&#x22;)else  print(&#x22;n no es igual a 2 o a 3&#x22;)end"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="ansi"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5c616680">> run</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#5c6166">n no es igual a 2 o a 3</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> runn no es igual a 2 o a 3"><div></div></button></div></figure></div>
<h3 id="24-funciones-otra-vez">2.4. Funciones, otra vez</h3>
<p>Las funciones son una herramienta muy útil, sobretodo porque permiten reciclar código, como en el ejemplo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">--se crea la función even()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">even</span><span style="--0:#A37ACC">(n)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> n </span><span style="--0:#ED9366">%</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">==</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(n</span><span style="--0:#ED9366">..</span><span style="--0:#86B300">" es par"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">else</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(n</span><span style="--0:#ED9366">..</span><span style="--0:#86B300">" no es par"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span style="--0:#F07171">even</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span style="--0:#F07171">even</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span style="--0:#F07171">even</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">4</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span style="--0:#F07171">even</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">5</span><span style="--0:#5C6166">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="--se crea la función even()function even(n)  if n % 2 == 0 then    print(n..&#x22; es par&#x22;)  else    print(n..&#x22; no es par&#x22;)  endendeven(2)even(3)even(4)even(5)"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="ansi"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5c616680">> run</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#5c6166">2 es par</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#5c6166">3 no es par</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#5c6166">4 es par</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#5c6166">5 no es par</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> run2 es par3 no es par4 es par5 no es par"><div></div></button></div></figure></div>
<p>¡Qué útiles son las funciones que nos salvan de escribir el mismo código constantemente!</p>
<p>Pero hay algo aún más importante de las funciones y es que, al igual que <code>print</code> es una función propia de PICO-8 para imprimir cosas en pantalla, hay otras muchas funciones para realizar diferentes tareas. Una de estas funciones es <code>_update</code>, que es especialmente importante pues se ejecuta 30 veces por segundo. ¿De qué nos sirve que esta función se ejecute 30 veces por segundo? Es útil porque, como en todo motor de videojuegos, se necesitan funciones que estén constantemente comprobando cosas como: la posición del jugador, la tecla que está pulsando, la posición de objetos, sus movimientos… etc. Además de esta, la función <code>btn</code> detecta si el jugador a pulsado el botón que se le pase por parámetro, ¡vayamos a comprobarlo! Para ello escriba lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">buttons</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">5</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"Has presionado un x"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">else</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"__"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_update</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">buttons</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function buttons()  if btn(5) then    print(&#x22;Has presionado un x&#x22;)  else    print(&#x22;__&#x22;)  endendfunction _update()  buttons()end"><div></div></button></div></figure></div>
<p>Si presiona <code>X</code> verá como aparece <code>Has presionado x</code>. En la figura 6 podrá ver los números que tiene asignado cada tecla, aunque… ¿se acuerda que anteriormente dije que las mayúsculas estaban reservadas para caracteres especiales? (figura 7).</p>
<figure><p><img  src="/_astro/mini-cheat-sheet.DDpDRS0Y_Z175AF8.webp" alt="Figura 6: Pequeño Cheat Sheet de PICO-8" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 6: Pequeño Cheat Sheet de PICO-8</figcaption></figure>
<figure><p><img  src="/_astro/letras-reservadas.Ca8zliq3_Z1VssyS.webp" alt="Figura 7: Algunas letras especiales de PICO-8" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 7: Algunas letras especiales de PICO-8</figcaption></figure>
<div dir="auto" class="callout" style="--callout-color-light: var(--im-callout-note); --callout-color-dark: var(--im-callout-note);"><div class="callout-title"><div class="callout-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">Nota</div></div><div class="callout-content"><p>Si ve que tiene la pantalla de comandos muy sucia, puede ejecutar el comando <code>cls</code> para limpiarla.</p></div></div>
<p>Viendo la figura 8, nos damos cuenta de que podemos ampliar el programa anterior para las flechas, pero en ese caso tendríamos en la función <code>buttons</code> algo así:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">txt </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"Has presionado "</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">5</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(txt</span><span style="--0:#ED9366">..</span><span style="--0:#86B300">" 5"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#FA8D3E">elseif</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">4</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(txt</span><span style="--0:#ED9366">..</span><span style="--0:#86B300">" 4"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#FA8D3E">elseif</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(txt</span><span style="--0:#ED9366">..</span><span style="--0:#86B300">" 0"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span style="--0:#FA8D3E">elseif</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(txt</span><span style="--0:#ED9366">..</span><span style="--0:#86B300">" 1"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span style="--0:#FA8D3E">elseif</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(txt</span><span style="--0:#ED9366">..</span><span style="--0:#86B300">" 2"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span style="--0:#FA8D3E">elseif</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(txt</span><span style="--0:#ED9366">..</span><span style="--0:#86B300">" 3"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span style="--0:#FA8D3E">else</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"__"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="txt = &#x22;Has presionado &#x22;if btn(5) then  print(txt..&#x22; 5&#x22;)elseif btn(4) then  print(txt..&#x22; 4&#x22;)elseif btn(0) then  print(txt..&#x22; 0&#x22;)elseif btn(1) then  print(txt..&#x22; 1&#x22;)elseif btn(2) then  print(txt..&#x22; 2&#x22;)elseif btn(3) then  print(txt..&#x22; 3&#x22;)else  print(&#x22;__&#x22;)end"><div></div></button></div></figure></div>
<p>Pero también podríamos escribir un programa que simplemente distinga si se está pulsando uno de los cinco botones, sin importar cual sea:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">or</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">or</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">or</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">or</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">4</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">or</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">5</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"Has presionado un boton"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#FA8D3E">else</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"__"</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="if btn(0) or btn(1) or  btn(2) or btn(3) or  btn(4) or btn(5) then  print(&#x22;Has presionado un boton&#x22;)else print(&#x22;__&#x22;) end"><div></div></button></div></figure></div>
<p>Nuevo concepto importante: los <strong>operadores lógicos</strong>. Los operadores lógicos son, valga la redundancia, operadores que comparan dos resultados de tipo <code>bool</code> y, dependiendo de las combinaciones de estos, devuelven <code>true</code> o <code>false</code>.</p>
<p>Hay dos operadores lógicos imprescindibles: <code>and</code> y <code>or</code>. El operador <code>and</code> devuelve <code>true</code> si, y solo si los operandos son <code>true</code>. En cambio, <code>or</code> devuelve <code>true</code> si por lo menos uno de los operandos es <code>true</code>.</p>
<p>Sabiendo esto, el código anterior se leería como: <em>si el botón 0, o el botón 1, o el botón 2, o el botón 3, o el botón 4, o el botón 5 es pulsado, entonces se imprimirá en pantalla “Has presionado un boton”, sino se imprimirá en pantalla <code>__</code>.</em></p>
<h3 id="25-dibujar-cosas-en-pantalla">2.5. Dibujar cosas en pantalla</h3>
<p>Al igual que existe la función <code>_update</code>, que se ejecuta 30 veces por segundo, también existe la función <code>_draw</code>, que
actualiza la pantalla cada vez que se ejecuta la función <code>_update</code>. Pero que <code>_draw</code> actualice la pantalla 30 veces por
segundo no quiere decir que vaya a eliminar lo que se había dibujado antes, para este fin se utiliza la función <code>cls</code> —que tal
vez ya haya utilizado para limpiar la pantalla de comandos.</p>
<p>Conociendo todo esto, se puede reescribir el programa anterior:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">buttons</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">or</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">or</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">or</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">or</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">4</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">or</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">5</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"Has presionado un boton"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">else</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"__"</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_draw</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">cls</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">buttons</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function buttons()  if btn(0) or btn(1) or    btn(2) or btn(3) or    btn(4) or btn(5) then    print(&#x22;Has presionado un boton&#x22;)  else print(&#x22;__&#x22;) endendfunction _draw()  cls()  buttons()end"><div></div></button></div></figure></div>
<p>Para empezar a hacer cosas más interesantes vaya a la segunda pestaña: el <strong>Editor de Sprites</strong> (figura 8). Una vez ahí, puede dibujar —con una resolución de 8 por 8 píxeles— el personaje que quiera, en mi caso dibujé un conejito al que llamaré Bunny (figura 9).</p>
<figure><p><img  src="/_astro/editor-de-sprites.BdTCb_Sk_1isX0d.webp" alt="Figura 8: Editor de sprites" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 8: Editor de sprites</figcaption></figure>
<figure><p><img  src="/_astro/bunny.CdGFye6K_11GMGi.webp" alt="Figura 9: Pixelart de Bunny" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 9: Pixelart de Bunny</figcaption></figure>
<p>Para hacer que este <em>sprite</em> se dibuje en pantalla deberá escribir lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_draw</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">cls</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">spr</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function _draw()  cls()  spr(1)end"><div></div></button></div></figure></div>
<p>La función <code>spr</code> se encarga de dibujar un sprite, y el 1 que se le pasa como parámetro simplemente indica el número del
sprite. Este número, empezando desde cero, viene indicado por la posición del sprite en las “casillas” que puede ver en la figura 8 y 9.</p>
<p>La función <code>spr</code> puede recibir más parámetros como la posición del sprite —por defecto es <code>(0,0)</code>.</p>
<p>La posición de un punto viene determinado por una coordenada en el eje <code>x</code> y en el eje <code>y</code>. El valor de <code>x</code> es la distancia del punto al lado izquiero de la pantalla, mientras que el valor de <code>y</code> es la distancia del punto al lado superior de la pantalla (figura 10). Así, la esquina superior izquierda es el <em>punto de origen</em> o punto <code>(0,0)</code>. Por defecto, el punto de un sprite no es el centro del sprite, es su esquina superior izquierda (figura 11).</p>
<figure><p><img  src="/_astro/sistema-de-coordenadas.BWYzgKrA_Zskjf8.webp" alt="Figura 10: Sistema de coordenadas" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 10: Sistema de coordenadas</figcaption></figure>
<figure><p><img  src="/_astro/ejemplo-sprite.BqUkuAtl_Z1e5ult.webp" alt="Figura 11: Ejemplo de posición de un sprite" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 11: Ejemplo de posición de un sprite</figcaption></figure>
<p>Sabiendo todo esto, ahora podemos hacer que Bunny se mueva por la pantalla:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">x </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">60</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#5C6166">y </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">60</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">move_bunny</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> (</span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">)) </span><span style="--0:#FA8D3E">then</span><span style="--0:#5C6166"> x </span><span style="--0:#ED9366">-=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> (</span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">)) </span><span style="--0:#FA8D3E">then</span><span style="--0:#5C6166"> x </span><span style="--0:#ED9366">+=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> (</span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166">)) </span><span style="--0:#FA8D3E">then</span><span style="--0:#5C6166"> y </span><span style="--0:#ED9366">-=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> (</span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">)) </span><span style="--0:#FA8D3E">then</span><span style="--0:#5C6166"> y </span><span style="--0:#ED9366">+=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_update</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">move_bunny</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_draw</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">cls</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">spr</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">, x, y)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="x = 60y = 60function move_bunny()  if (btn(0)) then x -= 1 end  if (btn(1)) then x += 1 end  if (btn(2)) then y -= 1 end  if (btn(3)) then y += 1 endendfunction _update()  move_bunny()endfunction _draw()  cls()  spr(1, x, y)end"><div></div></button></div></figure></div>
<h3 id="26-bucles">2.6. Bucles</h3>
<p>Ya para acabar con esta sección, voy a hablar de los <strong>bucles</strong> o loops.</p>
<p>Un bucle es una sección de código que se repetirá siempre y cuando se cumpla una condición.</p>
<p>Existen diferentes tipos de bucles, pero el único que nos importa ahora es el bucle <code>for</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">n </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">for</span><span style="--0:#5C6166"> i </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">, n </span><span style="--0:#FA8D3E">do</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(i)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="n = 3for i = 0, n do  print(i)end"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="ansi"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5c616680">> run</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#5c6166">0</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#5c6166">1</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#5c6166">2</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#5c6166">3</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="> run0123"><div></div></button></div></figure></div>
<p>En estos bucles siempre hay que declarar una variable índice <code>i</code>, esta aumentará en uno su valor cuando se acabe una repetición. La variable <code>n</code> significa que el bucle se repetirá <code>n-i</code> veces, en este caso <code>3 - 0 = 3</code> veces.</p>
<p>Aquí otro ejemplo:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_draw</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">cls</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">for</span><span style="--0:#5C6166"> i </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">10</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">do</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">spr</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">, i</span><span style="--0:#ED9366">^</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">60</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(i</span><span style="--0:#ED9366">^</span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function _draw()  cls()  for i = 1, 10 do    spr(1, i^2, 60)    print(i^2)  endend"><div></div></button></div></figure></div>
<p>En este caso, el bucle se repetirá <code>10 - 1 = 9</code> veces y dibujará al sprite con una coordenada <code>x</code> que aumentará en potencias de <code>2</code>, además imprime en pantalla las diferentes posiciones en <code>x</code> del sprite.</p>
<p>Por último, un ejemplo que no tiene por qué entender, pero que es interesante:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_draw</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">cls</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">for</span><span style="--0:#5C6166"> i </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">do</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">x </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">64</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">cos</span><span style="--0:#5C6166">(</span><span style="--0:#F07171">t</span><span style="--0:#5C6166">() </span><span style="--0:#ED9366">/</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> i </span><span style="--0:#ED9366">/</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">16</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">*</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">40</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">y </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">64</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">sin</span><span style="--0:#5C6166">(</span><span style="--0:#F07171">t</span><span style="--0:#5C6166">() </span><span style="--0:#ED9366">/</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">4</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> i </span><span style="--0:#ED9366">/</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">16</span><span style="--0:#5C6166">) </span><span style="--0:#ED9366">*</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">40</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">spr</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">, x, y)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">s </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"★ hi! ★"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(s, </span><span style="--0:#A37ACC">64</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">#</span><span style="--0:#5C6166">s </span><span style="--0:#ED9366">*</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">64</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">7</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function _draw()  cls()  for i = 0, 15 do    x = 64 + cos(t() / 2 + i / 16) * 40    y = 64 + sin(t() / 4 + i / 16) * 40    spr(1, x, y)  end  s = &#x22;★ hi! ★&#x22;  print(s, 64 - #s * 2, 64, 7)end"><div></div></button></div></figure></div>
<h2 id="3-squashy">3. Squashy</h2>
<p>Ahora vamos a crear un videojuego tipo <strong>Pong</strong> (figura 12).</p>
<p>Para empezar, acceda al <strong>Modo Comando</strong> y escriba <code>save squashy</code> para guardar el proyecto. Para asegurarse de no perder el progreso, cada cierto tiempo tendrá que presionar <code>CTRL + S</code> y para ejecutar el programa, en lugar de escribir <code>run</code> en la consola, puede presionar <code>CTRL + R</code>.</p>
<h3 id="31-moviendo-la-paleta">3.1. Moviendo la paleta</h3>
<p>Lo primero que vamos a hacer será crear la paleta <span class="aside"><code>paddle</code></span> y conseguir que se mueva por la parte inferior de la pantalla.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">--squashy</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">--paddle</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#5C6166">padx </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">52</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#5C6166">pady </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">122</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#5C6166">padw </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">24</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span style="--0:#5C6166">padh </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">4</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span style="--0:#5C6166">steps </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">movepaddle</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">padx </span><span style="--0:#ED9366">-=</span><span style="--0:#5C6166"> steps</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">elseif</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">padx </span><span style="--0:#ED9366">+=</span><span style="--0:#5C6166"> steps</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_update</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">movepaddle</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">20</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">21</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">22</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_draw</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">23</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">--clear the screen</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">24</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">rectfill</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">128</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">128</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">25</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">26</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">--draw the paddle</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">27</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">rectfill</span><span style="--0:#5C6166">(padx, pady, padx </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> padw, pady </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> padh, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">28</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="--squashy--paddlepadx = 52pady = 122padw = 24padh = 4steps = 3function movepaddle()  if btn(0) then    padx -= steps  elseif btn(1) then    padx += steps  endendfunction _update()  movepaddle()endfunction _draw()  --clear the screen  rectfill(0, 0, 128, 128, 3)  --draw the paddle  rectfill(padx, pady, padx + padw, pady + padh, 15)end"><div></div></button></div></figure></div>
<p>La función <code>rectfill</code> sirve para dibujar rectángulos, esta además recibe diferentes parámetros: los dos primeros indican la posición de la esquina superior izquierda del rectángulo —<code>padx</code> y <code>pady</code>—, los otros dos indican la posición de la esquina inferior derecha del rectángulo —<code>padx + padw</code> y <code>pady + padh</code>—, y el último indica el color —<code>15</code>— (figura 13).</p>
<figure><p><img  src="/_astro/sistema-de-coordenadas.BWYzgKrA_Zskjf8.webp" alt="Figura 12: Juego Squashy" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 12: Juego Squashy</figcaption></figure>
<figure><p><img  src="/_astro/ejemplo-rectangulo.CuEGhVbY_1AvHYo.webp" alt="Figura 13: Ejemplo de dibujado de un rectángulo" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 13: Ejemplo de dibujado de un rectángulo</figcaption></figure>
<h3 id="32-añadiendo-la-pelota">3.2. Añadiendo la pelota</h3>
<p>Debajo de las variables de paddle, escriba las variables de la pelota:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">--ball</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#5C6166">ballx </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">64</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#5C6166">bally </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">64</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#5C6166">ballsize </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#5C6166">ballxdir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#5C6166">ballydir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#A37ACC">2</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="--ballballx = 64bally = 64ballsize = 3ballxdir = 3ballydir = -2"><div></div></button></div></figure></div>
<p>Y luego añada al final de la función <code>_draw</code> lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">--draw ball</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#F07171">circfill</span><span style="--0:#5C6166">(ballx, bally, ballsize, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="--draw ballcircfill(ballx, bally, ballsize, 15)"><div></div></button></div></figure></div>
<p>La función <code>circfill</code> es como la función <code>rectfill</code>, solo que hay que pasarle por parámetros la posición del centro del círculo —<code>ballx</code> y <code>bally</code>—, su tamaño —<code>ballsize</code>— y su color —<code>15</code>—.</p>
<h3 id="33-una-pelota-estática-es-una-pelota-aburrida">3.3. Una pelota estática es una pelota aburrida</h3>
<p>Para que la pelota se mueva, escriba una nueva función debajo de <code>movepaddle</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">moveball</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">ballx </span><span style="--0:#ED9366">+=</span><span style="--0:#5C6166"> ballxdir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">bally </span><span style="--0:#ED9366">+=</span><span style="--0:#5C6166"> ballydir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function moveball()  ballx += ballxdir  bally += ballydirend"><div></div></button></div></figure></div>
<p>Y luego llámela en la función <code>_update</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_update</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">movepaddle</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">moveball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function _update()  movepaddle()  moveball()end"><div></div></button></div></figure></div>
<h3 id="34-rebote-de-la-pelota">3.4. Rebote de la pelota</h3>
<p>Si ejecuta el programa verá que la pelota sale volando por la esquina superior derecha de la pantalla, para solucionar este <em>ligero inconveniente</em> tendrá que crear una nueva función debajo de la función <code>moveball</code> y luego llamarla en <code>_update</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">bounceball</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">--left</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> ballx </span><span style="--0:#ED9366">&#x3C;</span><span style="--0:#5C6166"> ballsize </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballxdir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166">ballxdir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">--right</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> ballx </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">128</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166"> ballsize </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballxdir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166">ballxdir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">--top</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> bally </span><span style="--0:#ED9366">&#x3C;</span><span style="--0:#5C6166"> ballsize </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballydir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166">ballydir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_update</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">20</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">movepaddle</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">21</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">moveball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">22</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">bounceball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">23</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function bounceball()  --left  if ballx < ballsize then    ballxdir = -ballxdir    sfx(0)  end  --right  if ballx > 128 - ballsize then    ballxdir = -ballxdir    sfx(0)  end  --top  if bally < ballsize then    ballydir = -ballydir    sfx(0)  endendfunction _update()  movepaddle()  moveball()  bounceball()end"><div></div></button></div></figure></div>
<p>Como la función <code>bounceball</code> puede ser un poco complicada para el principiante, la explicaré a continuación.</p>
<p>Dentro de la función <code>bounceball</code> hay un primer apartado —<code>--left</code>—, donde se comprueba si la pelota ha alcanzado la parte izquierda de la pantalla: <em>si la posición en el eje <code>x</code> de la
pelota</em> —<code>ballx</code>— <em>es menor al ancho de la pelota</em> —es decir, si <code>ballx &#x3C; 3</code>; parecería más intuitivo decir “si la posición horizontal de la pelota es menor a cero…”, pero en ese caso se vería a la pelota atravesar un poco la pantalla antes de rebotar—<em>, entonces se cambia la dirección de la pelota</em> —<code>ballxdir = -ballxdir</code>— <em>y se llama a la función <code>sfx</code></em>.</p>
<p>La función <code>sfx</code> se utiliza para que suene un <em>efecto de sonido</em>. Para ello tiene que irse a la cuarta pestaña, el <strong>Editor de Efectos</strong>, y crear un efecto de sonido, en mi caso creé el que se puede ver en la figura 14.</p>
<figure><p><img  src="/_astro/sfx-1.wbOz95DX_Z106cHU.webp" alt="Figura 14: Primer efecto de sonido" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 14: Primer efecto de sonido</figcaption></figure>
<h3 id="35-golpear-a-la-pelota">3.5. Golpear a la pelota</h3>
<p>Ahora que la pelota se mueve y rebota contra los bordes, es el momento de hacer que rebote cuando choque contra la paleta. Para esta empresa hay que crear una nueva función debajo de <code>bounceball</code> y llamarla en <code>_update</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">bouncepaddle</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> ballx </span><span style="--0:#ED9366">>=</span><span style="--0:#5C6166"> padx </span><span style="--0:#ED9366">and</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballx </span><span style="--0:#ED9366">&#x3C;=</span><span style="--0:#5C6166"> padx </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> padw </span><span style="--0:#ED9366">and</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">bally </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> pady </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166"> padh </span><span style="--0:#ED9366">and</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">bally </span><span style="--0:#ED9366">&#x3C;</span><span style="--0:#5C6166"> pady </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballydir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166">ballydir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_update</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">movepaddle</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">moveball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">bounceball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">bouncepaddle</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function bouncepaddle()  if ballx >= padx and    ballx <= padx + padw and    bally > pady - padh and    bally < pady then    sfx(0)    ballydir = -ballydir  endendfunction _update()  movepaddle()  moveball()  bounceball()  bouncepaddle()end"><div></div></button></div></figure></div>
<p>La función <code>bouncepaddle</code> funciona de la siguiente manera: <em>si la posición en <code>x</code> de la pelota es mayor o igual a la posición en <code>x</code> de la esquina izquierda de la paleta y a su vez es menor o igual a la posición en <code>x</code> de la esquina derecha de la paleta, además de que si la posición en <code>y</code> de la pelota es mayor a la posición en <code>y</code> de la base de la paleta y a su vez es menor a la posición en <code>y</code> del lado superior de la paleta, entonces se llama a la función <code>sfx</code> y se le cambia la dirección vertical de la pelota.</em></p>
<h3 id="36-la-pelota-retorna">3.6. La pelota retorna</h3>
<p>Cuando la pelota llega a la parte inferior de la pantalla, esta desaparece sin dejar rastro. Ante esta desgracia tendrá que escribir una nueva función que hará reaparecer a la pelota en medio de la pantalla —también tendrá que llamar esta función en <code>_update</code>, pero espero que eso ya lo vaya pillando—:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">losedeadball</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> bally </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">128</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">bally </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">24</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_update</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">movepaddle</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">moveball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">bounceball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">bouncepaddle</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">losedeadball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function losedeadball()  if bally > 128 then    sfx(1)    bally = 24  endendfunction _update()  movepaddle()  moveball()  bounceball()  bouncepaddle()  losedeadball()end"><div></div></button></div></figure></div>
<p>En esta nueva función se llama a <code>sfx(1)</code> y no al <code>sfx</code> de siempre, esto es así porque reproducirá un efecto de sonido diferente y por esa misma razón tendrá que crear un nuevo efecto de sonido, en mi caso creé el que se puede ver en la figura 15.</p>
<figure><p><img  src="/_astro/sfx-2.Cm1jT7nB_sYz2y.webp" alt="Figura 15: Segundo efecto de sonido" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 15: Segundo efecto de sonido</figcaption></figure>
<h3 id="37-puntuación">3.7. Puntuación</h3>
<p>Para añadir una puntuación, hace falta crear una variable <code>score = 0</code> y hacer una pequeña modificación a la función <code>bouncepaddle</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">score </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">bouncepaddle</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> ballx </span><span style="--0:#ED9366">>=</span><span style="--0:#5C6166"> padx </span><span style="--0:#ED9366">and</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballx </span><span style="--0:#ED9366">&#x3C;=</span><span style="--0:#5C6166"> padx </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> padw </span><span style="--0:#ED9366">and</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">bally </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> pady </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballydir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166">ballydir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">score </span><span style="--0:#ED9366">+=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">10</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="score = 0function bouncepaddle()  if ballx >= padx and    ballx <= padx + padw and    bally > pady then    sfx(0)    ballydir = -ballydir    score += 10  endend"><div></div></button></div></figure></div>
<p>Ahora hay que imprimir en pantalla la puntuación, para ello hay que añadir lo siguiente a la función <code>_draw</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">--draw score</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#F07171">print</span><span style="--0:#5C6166">(score, </span><span style="--0:#A37ACC">12</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">6</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="--draw scoreprint(score, 12, 6, 15)"><div></div></button></div></figure></div>
<p>Aunque no lo mencioné anteriormente, la función <code>print</code> también puede recibir de parámetros una posición —en este caso <code>(12,6)</code>— y un color —<code>15</code>—.</p>
<h3 id="38-corazones">3.8. Corazones</h3>
<p>Para indicar la vida del jugador vamos a usar corazones, como se muestra en la figura 16 —aunque para ello se tendrá que borrar a Bunny—. Para esta tarea se debe crear una una variable <code>lives = 3</code> y modificar la función <code>_draw</code>:</p>
<figure><p><img  src="/_astro/corazon.CnXvlGlL_Z18dTh5.webp" alt="Figura 16: Pixelart de un corazón" width="384" height="384" loading="lazy" decoding="async"></p><figcaption>Figura 16: Pixelart de un corazón</figcaption></figure>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">lives </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_draw</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">--clear the screen</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">rectfill</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">128</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">128</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> lives </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">    </span><span style="--0:#787B8099;--0fs:italic">--draw the lives</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">for</span><span style="--0:#5C6166"> i</span><span style="--0:#ED9366">=</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">, lives </span><span style="--0:#FA8D3E">do</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent">      </span><span style="--0:#F07171">spr</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">124</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166"> i </span><span style="--0:#ED9366">*</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">8</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">4</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent">    </span><span style="--0:#787B8099;--0fs:italic">--draw score</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(score, </span><span style="--0:#A37ACC">12</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">6</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span class="indent">    </span><span style="--0:#787B8099;--0fs:italic">--draw paddle</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">rectfill</span><span style="--0:#5C6166">(padx, pady, padx </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> padw, pady </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> padh, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span class="indent">    </span><span style="--0:#787B8099;--0fs:italic">--draw ball</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">circfill</span><span style="--0:#5C6166">(ballx, bally, ballsize, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">else</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code"><span class="indent">    </span><span style="--0:#787B8099;--0fs:italic">--draw game over</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"game over"</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">48</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">64</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">20</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="lives = 3function _draw()  --clear the screen  rectfill(0, 0, 128, 128, 3)  if lives > 0 then    --draw the lives    for i=1, lives do      spr(1, 124 - i * 8, 4)    end    --draw score    print(score, 12, 6, 15)    --draw paddle    rectfill(padx, pady, padx + padw, pady + padh, 15)    --draw ball    circfill(ballx, bally, ballsize, 15)  else    --draw game over    print(&#x22;game over&#x22;, 48, 64, 15)  endend"><div></div></button></div></figure></div>
<p>Además, hay que complicar un poco —solo un poco— la función <code>losedeadball</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">losedeadball</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> bally </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">128</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> lives </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">      </span><span style="--0:#787B8099;--0fs:italic">--next live</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">      </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">      </span></span><span style="--0:#5C6166">bally </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">24</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">      </span></span><span style="--0:#5C6166">lives </span><span style="--0:#ED9366">-=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">1</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">else</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent">      </span><span style="--0:#787B8099;--0fs:italic">--game over</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">      </span></span><span style="--0:#5C6166">ballxdir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">      </span></span><span style="--0:#5C6166">ballydir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function losedeadball()  if bally > 128 then    if lives > 0 then      --next live      sfx(1)      bally = 24      lives -= 1    else      --game over      ballxdir = 0      ballydir = 0    end  endend"><div></div></button></div></figure></div>
<p>Y por último, cambiar ligeramente la función <code>_update</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_update</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> lives </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">movepaddle</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">moveball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">bounceball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">bouncepaddle</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">losedeadball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function _update()  if lives > 0 then    movepaddle()    moveball()    bounceball()    bouncepaddle()    losedeadball()  endend"><div></div></button></div></figure></div>
<h2 id="4-final">4. Final</h2>
<p>Con todo, el código debería quedar tal que así:</p>
<div class="expressive-code"><figure class="frame" style="--lnWidth:3ch"><figcaption class="header"></figcaption><pre data-language="lua"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">--squashy</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">--paddle</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#5C6166">padx </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">52</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#5C6166">pady </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">122</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#5C6166">padw </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">24</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span style="--0:#5C6166">padh </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">4</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span style="--0:#5C6166">steps </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">--ball</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span style="--0:#5C6166">ballx </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">64</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span style="--0:#5C6166">bally </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">64</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span style="--0:#5C6166">ballsize </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span style="--0:#5C6166">ballxdir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span style="--0:#5C6166">ballydir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#A37ACC">2</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code"><span style="--0:#5C6166">score </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code"><span style="--0:#5C6166">lives </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">3</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">20</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">movepaddle</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">21</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">22</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">padx </span><span style="--0:#ED9366">-=</span><span style="--0:#5C6166"> steps</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">23</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">elseif</span><span style="--0:#5C6166"> </span><span style="--0:#F07171">btn</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">24</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">padx </span><span style="--0:#ED9366">+=</span><span style="--0:#5C6166"> steps</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">25</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">26</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">27</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">28</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">moveball</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">29</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">ballx </span><span style="--0:#ED9366">+=</span><span style="--0:#5C6166"> ballxdir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">30</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">bally </span><span style="--0:#ED9366">+=</span><span style="--0:#5C6166"> ballydir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">31</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">32</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">33</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">bounceball</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">34</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">--left</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">35</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> ballx </span><span style="--0:#ED9366">&#x3C;</span><span style="--0:#5C6166"> ballsize </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">36</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballxdir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166">ballxdir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">37</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">38</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">39</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">--right</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">40</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> ballx </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">128</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166"> ballsize </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">41</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballxdir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166">ballxdir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">42</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">43</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">44</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">--top</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">45</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> bally </span><span style="--0:#ED9366">&#x3C;</span><span style="--0:#5C6166"> ballsize </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">46</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballydir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166">ballydir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">47</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">48</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">49</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">50</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">51</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">bouncepaddle</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">52</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> ballx </span><span style="--0:#ED9366">>=</span><span style="--0:#5C6166"> padx </span><span style="--0:#ED9366">and</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">53</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballx </span><span style="--0:#ED9366">&#x3C;=</span><span style="--0:#5C6166"> padx </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> padw </span><span style="--0:#ED9366">and</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">54</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">bally </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> pady </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">55</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">56</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">ballydir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166">ballydir</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">57</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">score </span><span style="--0:#ED9366">+=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">10</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">58</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">59</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">60</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">61</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">losedeadball</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">62</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> bally </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">128</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">63</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> lives </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">64</div></div><div class="code"><span class="indent">      </span><span style="--0:#787B8099;--0fs:italic">--next live</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">65</div></div><div class="code"><span class="indent">      </span><span style="--0:#F07171">sfx</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">66</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">      </span></span><span style="--0:#5C6166">bally </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">24</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">67</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">      </span></span><span style="--0:#5C6166">lives </span><span style="--0:#ED9366">-=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">1</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">68</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">else</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">69</div></div><div class="code"><span class="indent">      </span><span style="--0:#787B8099;--0fs:italic">--game over</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">70</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">      </span></span><span style="--0:#5C6166">ballxdir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">71</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">      </span></span><span style="--0:#5C6166">ballydir </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">72</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">73</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">74</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">75</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">76</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_update</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">77</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> lives </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">78</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">movepaddle</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">79</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">moveball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">80</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">bounceball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">81</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">bouncepaddle</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">82</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">losedeadball</span><span style="--0:#5C6166">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">83</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">84</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">85</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">86</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">_draw</span><span style="--0:#A37ACC">()</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">87</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">--clear the screen</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">88</div></div><div class="code"><span class="indent">  </span><span style="--0:#F07171">rectfill</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">128</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">128</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">3</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">89</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> lives </span><span style="--0:#ED9366">></span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">then</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">90</div></div><div class="code"><span class="indent">    </span><span style="--0:#787B8099;--0fs:italic">--draw the lives</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">91</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">for</span><span style="--0:#5C6166"> i</span><span style="--0:#ED9366">=</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">, lives </span><span style="--0:#FA8D3E">do</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">92</div></div><div class="code"><span class="indent">      </span><span style="--0:#F07171">spr</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">124</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#5C6166"> i </span><span style="--0:#ED9366">*</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">8</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">4</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">93</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">94</div></div><div class="code"><span class="indent">    </span><span style="--0:#787B8099;--0fs:italic">--draw score</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">95</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(score, </span><span style="--0:#A37ACC">12</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">6</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">96</div></div><div class="code"><span class="indent">    </span><span style="--0:#787B8099;--0fs:italic">--draw paddle</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">97</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">rectfill</span><span style="--0:#5C6166">(padx, pady, padx </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> padw, pady </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> padh, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">98</div></div><div class="code"><span class="indent">    </span><span style="--0:#787B8099;--0fs:italic">--draw ball</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">99</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">circfill</span><span style="--0:#5C6166">(ballx, bally, ballsize, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">100</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">else</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">101</div></div><div class="code"><span class="indent">    </span><span style="--0:#787B8099;--0fs:italic">--draw game over</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">102</div></div><div class="code"><span class="indent">    </span><span style="--0:#F07171">print</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"game over"</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">48</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">64</span><span style="--0:#5C6166">, </span><span style="--0:#A37ACC">15</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">103</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">end</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">104</div></div><div class="code"><span style="--0:#FA8D3E">end</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="--squashy--paddlepadx = 52pady = 122padw = 24padh = 4steps = 3--ballballx = 64bally = 64ballsize = 3ballxdir = 3ballydir = -2score = 0lives = 3function movepaddle()  if btn(0) then    padx -= steps  elseif btn(1) then    padx += steps  endendfunction moveball()  ballx += ballxdir  bally += ballydirendfunction bounceball()  --left  if ballx < ballsize then    ballxdir = -ballxdir    sfx(0)  end  --right  if ballx > 128 - ballsize then    ballxdir = -ballxdir    sfx(0)  end  --top  if bally < ballsize then    ballydir = -ballydir    sfx(0)  endendfunction bouncepaddle()  if ballx >= padx and    ballx <= padx + padw and    bally > pady then    sfx(0)    ballydir = -ballydir    score += 10  endendfunction losedeadball()  if bally > 128 then    if lives > 0 then      --next live      sfx(1)      bally = 24      lives -= 1    else      --game over      ballxdir = 0      ballydir = 0    end  endendfunction _update()  if lives > 0 then    movepaddle()    moveball()    bounceball()    bouncepaddle()    losedeadball()  endendfunction _draw()  --clear the screen  rectfill(0, 0, 128, 128, 3)  if lives > 0 then    --draw the lives    for i=1, lives do      spr(1, 124 - i * 8, 4)    end    --draw score    print(score, 12, 6, 15)    --draw paddle    rectfill(padx, pady, padx + padw, pady + padh, 15)    --draw ball    circfill(ballx, bally, ballsize, 15)  else    --draw game over    print(&#x22;game over&#x22;, 48, 64, 15)  endend"><div></div></button></div></figure></div>
<p>Para exportar ejecute el juego y presione <code>CTRL + 7</code>, después vaya al <strong>Modo Comando</strong> y escriba <code>save squashy.png</code>, así se le descargará un archivo <code>.png</code>, si ese mismo archivo lo arrastra hasta PICO-8 se le cargará el juego (figura 17).</p>
<figure><p><img  src="/_astro/squashy.p8.7TZDJUGQ_ZF3dkz.webp" alt="Figura 17: Squashy exportado a PNG" width="160" height="205" loading="lazy" decoding="async"></p><figcaption>Figura 17: Squashy exportado a PNG</figcaption></figure>
<h2 id="referencias">Referencias</h2>
<ol>
<li>White, J. (s.f.). <em>PICO-8 User Manual</em>. <a href="https://www.lexaloffle.com/dl/docs/pico-8_manual.html" rel="noopener noreferrer">https://www.lexaloffle.com/dl/docs/pico-8_manual.html<span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10v10M7 17 17 7"></path></svg></span></a></li>
<li>De Bock, A. (agosto de 2015). <em>PICO-8 Zine</em> #1. <a href="https://sectordub.itch.io/pico-8-fanzine-1" rel="noopener noreferrer">https://sectordub.itch.io/pico-8-fanzine-1<span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10v10M7 17 17 7"></path></svg></span></a></li>
</ol>  </article> <div id="end-of-article"> <aside class="flex items-start mb-8"> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var l=(s,i,o)=>{let r=async()=>{await(await s())()},t=typeof i.value=="object"?i.value:void 0,c={rootMargin:t==null?void 0:t.rootMargin},n=new IntersectionObserver(e=>{for(let a of e)if(a.isIntersecting){n.disconnect(),r();break}},c);for(let e of o.children)n.observe(e)};(self.Astro||(self.Astro={})).visible=l;window.dispatchEvent(new Event("astro:visible"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z27gpUC" prefix="r8" component-url="/_astro/info-button.v77e7Vc3.js" component-export="default" renderer-url="/_astro/client.DeZSGkx7.js" props="{&quot;coverCredits&quot;:[0,&quot;https://www.steamgriddb.com/grid/163642&quot;],&quot;pubDate&quot;:[3,&quot;2023-03-06T00:00:00.000Z&quot;],&quot;lastModDate&quot;:[0],&quot;category&quot;:[0,&quot;gamedev&quot;],&quot;tags&quot;:[1,[[0,&quot;pico-8&quot;]]]}" ssr="" client="visible" opts="{&quot;name&quot;:&quot;InfoButton&quot;,&quot;value&quot;:true}" await-children=""><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-transparent hover:bg-accent hover:text-accent-foreground size-9" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r8R0:" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></button><!--astro:end--></astro-island> <astro-island uid="1alghL" prefix="r9" component-url="/_astro/copy-url.Dzye2lEi.js" component-export="default" renderer-url="/_astro/client.DeZSGkx7.js" props="{&quot;url&quot;:[0,&quot;https://imangelo.dev/como-hacer-un-videojuego-con-pico-8/&quot;]}" ssr="" client="visible" opts="{&quot;name&quot;:&quot;CopyUrlButton&quot;,&quot;value&quot;:true}" await-children=""><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-transparent hover:bg-accent hover:text-accent-foreground size-9"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-copied="false" class="
          transition-all duration-base
          data-[copied=&#x27;true&#x27;]:scale-0
          data-[copied=&#x27;true&#x27;]:opacity-0
        "><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-copied="false" class="
          absolute
          transition-all duration-base
          scale-0
          opacity-0
          data-[copied=&#x27;true&#x27;]:scale-100
          data-[copied=&#x27;true&#x27;]:opacity-100
        "><path d="M20 6 9 17l-5-5"></path></svg></button><!--astro:end--></astro-island> <astro-island uid="1T6Oq3" prefix="r10" component-url="/_astro/share-button.AJUKhckH.js" component-export="default" renderer-url="/_astro/client.DeZSGkx7.js" props="{&quot;title&quot;:[0,&quot;123&quot;],&quot;url&quot;:[0,&quot;https://imangelo.dev/como-hacer-un-videojuego-con-pico-8/&quot;]}" ssr="" client="visible" opts="{&quot;name&quot;:&quot;ShareButton&quot;,&quot;value&quot;:true}" await-children=""><div class="inline-flex"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground size-9 bg-background relative z-10 data-[open=&#x27;true&#x27;]:border data-[open=&#x27;true&#x27;]:rounded-r-none data-[open=&#x27;true&#x27;]:text-muted-foreground"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="
            transition-all duration-base
            data-[open=&#x27;true&#x27;]:scale-0
            data-[open=&#x27;true&#x27;]:opacity-0
          "><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" x2="12" y1="2" y2="15"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="
            absolute
            transition-all duration-base
            scale-0 opacity-0
            data-[open=&#x27;true&#x27;]:scale-100
            data-[open=&#x27;true&#x27;]:opacity-100
          "><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button><div aria-hidden="true" inert="" class="
          rounded-r-md border border-l-0
          h-9
          bg-background-contrast
          transition-all duration-base
          opacity-0
          pointer-events-none
          ml-[-100%]
          data-[open=&#x27;true&#x27;]:animate-im-slide-to-right
          data-[open=&#x27;false&#x27;]:animate-im-slide-to-left
        "><div class="flex size-full"><a tabindex="-1" href="https://www.linkedin.com/sharing/share-offsite?text=123&amp;url=https%3A%2F%2Fimangelo.dev%2Fcomo-hacer-un-videojuego-con-pico-8%2F" target="_blank" rel="noopener noreferrer"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-all duration-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-transparent hover:bg-accent hover:text-accent-foreground size-9 rounded-none"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M8 11v5"></path><path d="M8 8v.01"></path><path d="M12 16v-5"></path><path d="M16 16v-3a2 2 0 1 0 -4 0"></path><path d="M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z"></path></svg></button></a><a tabindex="-1" href="https://t.me/share/url?text=123&amp;url=https%3A%2F%2Fimangelo.dev%2Fcomo-hacer-un-videojuego-con-pico-8%2F" target="_blank" rel="noopener noreferrer"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-all duration-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-transparent hover:bg-accent hover:text-accent-foreground size-9 rounded-none"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4"></path></svg></button></a><a tabindex="-1" href="https://twitter.com/intent/tweet?text=123&amp;url=https%3A%2F%2Fimangelo.dev%2Fcomo-hacer-un-videojuego-con-pico-8%2F" target="_blank" rel="noopener noreferrer"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-all duration-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-transparent hover:bg-accent hover:text-accent-foreground size-9 rounded-none"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 4l11.733 16h4.267l-11.733 -16z"></path><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"></path></svg></button></a></div></div></div><!--astro:end--></astro-island> <script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><astro-island uid="WBS2c" component-url="/_astro/like-button.DzkhgXBo.js" component-export="default" renderer-url="/_astro/client.DeZSGkx7.js" props="{&quot;slug&quot;:[0,&quot;como-hacer-un-videojuego-con-pico-8&quot;]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;LikeButton&quot;,&quot;value&quot;:&quot;react&quot;}" await-children=""><div class="animate-pulse rounded-md bg-primary/5 h-9 w-20 ml-auto" slot="fallback"></div><template data-astro-template="fallback"><div class="animate-pulse rounded-md bg-primary/5 h-9 w-20 ml-auto" slot="fallback"></div></template><!--astro:end--></astro-island> </aside>  </div>  </article> </main> <footer class="pt-8 pb-12 border-t bg-background-contrast relative w-screen left-1/2 right-1/2 -ml-[50vw] -mr-[50vw]"> <div class="container"> <ul class="mb-14 flex justify-between *:flex *:flex-col *:items-start *:gap-y-2 text-sm"> <li> <a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground text-foreground border-b-transparent" about="_self" href="/">Inicio</a> </li> <li> <a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground text-foreground border-b-transparent" about="_self" href="/newsletter">Newsletter</a> <a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground text-foreground border-b-transparent" about="_self" href="/rss.xml">RSS</a> </li> <li> <a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground text-foreground border-b-transparent" about="_self" href="https://portfolio.imangelo.dev/">Portfolio</a> <a class="inline-flex items-center justify-center whitespace-nowrap transition-colors duration-base cursor-pointer border-b hover:text-accent-foreground hover:border-accent-foreground focus-visible:text-accent-foreground focus-visible:border-accent-foreground text-foreground border-b-transparent" about="_self" href="/links">Links</a> </li> </ul> <p class="uppercase flex items-center justify-between text-xs text-muted-foreground"> <span>di mikeˈlandʒelo</span> <span>MD, ES — 2024</span> </p> </div> </footer>  <script>(()=>{var l=(o,t)=>{let i=async()=>{await(await o())()},e=typeof t.value=="object"?t.value:void 0,s={timeout:e==null?void 0:e.timeout};"requestIdleCallback"in window?window.requestIdleCallback(i,s):setTimeout(i,s.timeout||200)};(self.Astro||(self.Astro={})).idle=l;window.dispatchEvent(new Event("astro:idle"));})();</script><astro-island uid="2pIGwL" prefix="r12" component-url="/_astro/toaster.DsoaCN1j.js" component-export="default" renderer-url="/_astro/client.DeZSGkx7.js" props="{}" ssr="" client="idle" opts="{&quot;name&quot;:&quot;Toaster&quot;,&quot;value&quot;:true}" await-children=""><div role="region" aria-label="Notifications (F8)" tabindex="-1" style="pointer-events:none"><ol tabindex="-1" class="fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]"></ol></div><!--astro:end--></astro-island> </body></html>