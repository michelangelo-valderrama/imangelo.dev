import{r as o}from"./index.CTjT7uj6.js";import{j as P,S as $,u as R}from"./utils.DpFHxlYG.js";import{r as H,R as z}from"./index.DFVfAxIp.js";function g(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function le(t,e=[]){let n=[];function r(i,c){const u=o.createContext(c),d=n.length;n=[...n,c];const a=m=>{const{scope:v,children:p,...E}=m,h=v?.[t]?.[d]||u,y=o.useMemo(()=>E,Object.values(E));return P.jsx(h.Provider,{value:y,children:p})};a.displayName=i+"Provider";function l(m,v){const p=v?.[t]?.[d]||u,E=o.useContext(p);if(E)return E;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[a,l]}const s=()=>{const i=n.map(c=>o.createContext(c));return function(u){const d=u?.[t]||i;return o.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return s.scopeName=t,[r,K(s,...e)]}function K(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=r.reduce((u,{useScope:d,scopeName:a})=>{const m=d(i)[`__scope${a}`];return{...u,...m}},{});return o.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}var X=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],S=X.reduce((t,e)=>{const n=o.forwardRef((r,s)=>{const{asChild:i,...c}=r,u=i?$:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),P.jsx(u,{...c,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Y(t,e){t&&H.flushSync(()=>t.dispatchEvent(e))}function b(t){const e=o.useRef(t);return o.useEffect(()=>{e.current=t}),o.useMemo(()=>(...n)=>e.current?.(...n),[])}function q(t,e=globalThis?.document){const n=b(t);o.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var G="DismissableLayer",D="dismissableLayer.update",J="dismissableLayer.pointerDownOutside",Q="dismissableLayer.focusOutside",M,U=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_=o.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:c,onDismiss:u,...d}=t,a=o.useContext(U),[l,m]=o.useState(null),v=l?.ownerDocument??globalThis?.document,[,p]=o.useState({}),E=R(e,f=>m(f)),h=Array.from(a.layers),[y]=[...a.layersWithOutsidePointerEventsDisabled].slice(-1),W=h.indexOf(y),L=l?h.indexOf(l):-1,k=a.layersWithOutsidePointerEventsDisabled.size>0,x=L>=W,j=Z(f=>{const O=f.target,T=[...a.branches].some(C=>C.contains(O));!x||T||(s?.(f),c?.(f),f.defaultPrevented||u?.())},v),A=ee(f=>{const O=f.target;[...a.branches].some(C=>C.contains(O))||(i?.(f),c?.(f),f.defaultPrevented||u?.())},v);return q(f=>{L===a.layers.size-1&&(r?.(f),!f.defaultPrevented&&u&&(f.preventDefault(),u()))},v),o.useEffect(()=>{if(l)return n&&(a.layersWithOutsidePointerEventsDisabled.size===0&&(M=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),a.layersWithOutsidePointerEventsDisabled.add(l)),a.layers.add(l),I(),()=>{n&&a.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=M)}},[l,v,n,a]),o.useEffect(()=>()=>{l&&(a.layers.delete(l),a.layersWithOutsidePointerEventsDisabled.delete(l),I())},[l,a]),o.useEffect(()=>{const f=()=>p({});return document.addEventListener(D,f),()=>document.removeEventListener(D,f)},[]),P.jsx(S.div,{...d,ref:E,style:{pointerEvents:k?x?"auto":"none":void 0,...t.style},onFocusCapture:g(t.onFocusCapture,A.onFocusCapture),onBlurCapture:g(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:g(t.onPointerDownCapture,j.onPointerDownCapture)})});_.displayName=G;var V="DismissableLayerBranch",B=o.forwardRef((t,e)=>{const n=o.useContext(U),r=o.useRef(null),s=R(e,r);return o.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),P.jsx(S.div,{...t,ref:s})});B.displayName=V;function Z(t,e=globalThis?.document){const n=b(t),r=o.useRef(!1),s=o.useRef(()=>{});return o.useEffect(()=>{const i=u=>{if(u.target&&!r.current){let d=function(){F(J,n,a,{discrete:!0})};const a={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function ee(t,e=globalThis?.document){const n=b(t),r=o.useRef(!1);return o.useEffect(()=>{const s=i=>{i.target&&!r.current&&F(Q,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function I(){const t=new CustomEvent(D);document.dispatchEvent(t)}function F(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Y(s,i):s.dispatchEvent(i)}var fe=_,me=B,w=globalThis?.document?o.useLayoutEffect:()=>{},te="Portal",ne=o.forwardRef((t,e)=>{const{container:n,...r}=t,[s,i]=o.useState(!1);w(()=>i(!0),[]);const c=n||s&&globalThis?.document?.body;return c?z.createPortal(P.jsx(S.div,{...r,ref:e}),c):null});ne.displayName=te;function se(t,e){return o.useReducer((n,r)=>e[n][r]??n,t)}var re=t=>{const{present:e,children:n}=t,r=oe(e),s=typeof n=="function"?n({present:r.isPresent}):o.Children.only(n),i=R(r.ref,ie(s));return typeof n=="function"||r.isPresent?o.cloneElement(s,{ref:i}):null};re.displayName="Presence";function oe(t){const[e,n]=o.useState(),r=o.useRef({}),s=o.useRef(t),i=o.useRef("none"),c=t?"mounted":"unmounted",[u,d]=se(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const a=N(r.current);i.current=u==="mounted"?a:"none"},[u]),w(()=>{const a=r.current,l=s.current;if(l!==t){const v=i.current,p=N(a);t?d("MOUNT"):p==="none"||a?.display==="none"?d("UNMOUNT"):d(l&&v!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,d]),w(()=>{if(e){let a;const l=e.ownerDocument.defaultView??window,m=p=>{const h=N(r.current).includes(p.animationName);if(p.target===e&&h&&(d("ANIMATION_END"),!s.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",a=l.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},v=p=>{p.target===e&&(i.current=N(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{l.clearTimeout(a),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:o.useCallback(a=>{a&&(r.current=getComputedStyle(a)),n(a)},[])}}function N(t){return t?.animationName||"none"}function ie(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ve({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=ae({defaultProp:e,onChange:n}),i=t!==void 0,c=i?t:r,u=b(n),d=o.useCallback(a=>{if(i){const m=typeof a=="function"?a(t):a;m!==t&&u(m)}else s(a)},[i,t,s,u]);return[c,d]}function ae({defaultProp:t,onChange:e}){const n=o.useState(t),[r]=n,s=o.useRef(r),i=b(e);return o.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}export{me as B,_ as D,S as P,fe as R,re as a,b,le as c,g as d,ne as e,w as f,Y as g,ve as u};
