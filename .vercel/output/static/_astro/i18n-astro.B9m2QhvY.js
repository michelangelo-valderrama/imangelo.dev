import{c as n,r as e,m as i}from"./instance.MjLduAVP.js";import{d as l}from"./utils.DpFHxlYG.js";import"./astro/assets-service.Dt0krELq.js";import"./index.CTjT7uj6.js";const a=`<p>Nuevo artículo, nuevo tutorial.</p>
<p>Aquí una “guía” de como implementar i18n en Astro. ¿Pero no existen ya librerias para eso? Pues sí, pero cuando yo las quise implementar no funcionaban, así que tocó crearse la propia. Además, hacerlo tú mismo te hace menos dependiente de terceros.</p>
<p>Tener una página en muchos idiomas es siempre un fastidio, pero a veces es una necesidad si una quiere que su página web sea más accesible. Pero yo me vi en esta necesidad porque me tocó migrar la web de IF7SPORTS de Angular a Astro. ¿Por qué se usó Angular para una página estática? Ni idea, pero tardaba 6 segundos en cargar y eso no era bueno. En el blog de la web escribí un muy pequeño artículo sobre la migración, os lo dejo <a href="https://if7sports.com/es/blog/presenting-our-new-website/" rel="noopener noreferrer">aquí<span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10v10M7 17 17 7"></path></svg></span></a>. La web también tenía diferentes idiomas, pero se usaba un sistema que yo he denominado <em>sistema de idiomas en base a directorios</em>, donde básicamente tienes una carpeta por cada idioma (aunque el idioma por defecto puede ser la carpeta raíz), llegando a una estructura tal que así:</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.tdcb7.css"><script type="module" src="/_astro/ec.8zarh.js"><\/script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5c6166">pages/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent"><span style="--0:#5c6166">  </span></span><span style="--0:#5c6166">index.html</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent"><span style="--0:#5c6166">  </span></span><span style="--0:#5c6166">en/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent"><span style="--0:#5c6166">    </span></span><span style="--0:#5c6166">index.html</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent"><span style="--0:#5c6166">  </span></span><span style="--0:#5c6166">fr/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent"><span style="--0:#5c6166">    </span></span><span style="--0:#5c6166">index.html</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="pages/  index.html  en/    index.html  fr/    index.html"><div></div></button></div></figure></div>
<p>De ello aprendí algo muy importante:</p>
<blockquote><p>Ni de coña vuelvo a tener que copiar una página entera para que esté en otro puto idioma.</p></blockquote>
<p>Siempre que se añadía cualquier cosa a la web había que realizarlo mínimo dos veces y era horrible, por eso decidí crear el sistema de idiomas de otra manera, uno que he denominado <em>sistema de idiomas en base a archivos</em>, donde tienes las traducciones en archivos separados.</p>
<blockquote><p>Si quereis basar vuestra sistema de traducción en directorios y comprobar en carne propia por qué es un atentado contra la humanidad os dejo la receta de oficial Astro de cómo hacerlo <a href="https://docs.astro.build/en/recipes/i18n/" rel="noopener noreferrer">aquí<span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10v10M7 17 17 7"></path></svg></span></a>.</p></blockquote>
<p>Cosa importante a decir ahora es que todas las rutas tiene el idioma como prefijo, e.g. <code>/en/home</code> o <code>/es/home</code>, por lo que la ruta raiz no es ningún idioma, e.g. <code>/home</code> es un 404, esto puede ser o no importante dependiendo de lo que buscas. Si quieres intentar hacer que la ruta raiz sea el idioma por defecto te deseo buena suerte y que dios te acompañe :></p>
<hr>
<h2 id="configuración-y-utilidades">Configuración y utilidades</h2>
<p>Crea el directorio <code>src/i18n</code>, donde estarán todos los scripts y componentes exclusivos de los idiomas, excepto las traducciones.</p>
<p>Cree la carpeta <code>public/locales</code> y dentro de ella, crea un archivo <code>.json</code> por cada idioma que quieras. En mi caso serán el Inglés, Español y Francés.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5c6166">public/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent"><span style="--0:#5c6166">  </span></span><span style="--0:#5c6166">locales/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent"><span style="--0:#5c6166">    </span></span><span style="--0:#5c6166">en.json</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent"><span style="--0:#5c6166">    </span></span><span style="--0:#5c6166">es.json</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent"><span style="--0:#5c6166">    </span></span><span style="--0:#5c6166">fr.json</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public/  locales/    en.json    es.json    fr.json"><div></div></button></div></figure></div>
<p>En <code>src/i18n/config.ts</code>, añade lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> es </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'../../public/locales/es.json'</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> en </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'../../public/locales/en.json'</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> fr </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'../../public/locales/fr.json'</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> LANGUAGES </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">en</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'English'</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">es</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'Español'</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">fr</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'Français'</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> LOCALES </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">en</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'en-GB'</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">es</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'es-ES'</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">fr</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'fr-FR'</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> LANGUAGES_ARRAY </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> Object</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">keys</span><span style="--0:#5C6166">(LANGUAGES)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> DEFAULT_LANGUAGE </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'en'</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">20</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">21</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> TRANSLATIONS </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> { en</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> es</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> fr }</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">22</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">23</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">type</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Lang</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">keyof</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">typeof</span><span style="--0:#5C6166"> TRANSLATIONS</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">24</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">type</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Page</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">keyof</span><span style="--0:#5C6166"> (</span><span style="--0:#ED9366">typeof</span><span style="--0:#5C6166"> TRANSLATIONS)[</span><span style="--0:#ED9366">typeof</span><span style="--0:#5C6166"> DEFAULT_LANGUAGE]</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import es from &#x27;../../public/locales/es.json&#x27;import en from &#x27;../../public/locales/en.json&#x27;import fr from &#x27;../../public/locales/fr.json&#x27;export const LANGUAGES = {  en: &#x27;English&#x27;,  es: &#x27;Español&#x27;,  fr: &#x27;Français&#x27;}export const LOCALES = {  en: &#x27;en-GB&#x27;,  es: &#x27;es-ES&#x27;,  fr: &#x27;fr-FR&#x27;}export const LANGUAGES_ARRAY = Object.keys(LANGUAGES)export const DEFAULT_LANGUAGE = &#x27;en&#x27;export const TRANSLATIONS = { en, es, fr }export type Lang = keyof typeof TRANSLATIONSexport type Page = keyof (typeof TRANSLATIONS)[typeof DEFAULT_LANGUAGE]"><div></div></button></div></figure></div>
<p>En <code>config.ts</code> se importan las traducciones, se configuran los idiomas, sus <em>locales</em> y se hacen demás cosas útiles.</p>
<p>En el archivo <code>src/i18n/utils.ts</code>, añade lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">DEFAULT_LANGUAGE</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">LANGUAGES</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">TRANSLATIONS</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">type</span><span style="--0:#5C6166"> Lang</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">type</span><span style="--0:#5C6166"> Page</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span style="--0:#5C6166">} </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'./config'</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">/**</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* Obtiene el idioma por el pathname.</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* </span><span style="--0:#FA8D3E;--0fs:italic">@param</span><span style="--0:#787B8099;--0fs:italic"> </span><span style="--0:#5C6166;--0fs:italic">pathname</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">*/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">getLangFromPathname</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">pathname</span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">string</span><span style="--0:#5C6166">) {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> [</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> lang] </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> pathname</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">split</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">'/'</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">return</span><span style="--0:#5C6166"> lang </span><span style="--0:#FA8D3E">as</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Lang</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">/**</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* Obtiene el idioma por un objeto URL.</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">20</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* </span><span style="--0:#FA8D3E;--0fs:italic">@param</span><span style="--0:#787B8099;--0fs:italic"> </span><span style="--0:#5C6166;--0fs:italic">url</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">21</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">*/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">22</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">getLanguageFromUrl</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> (</span><span style="--0:#A37ACC">url</span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">URL</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">=></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">23</div></div><div class="code"><span class="indent">  </span><span style="--0:#F2AE49">getLangFromPathname</span><span style="--0:#5C6166">(url</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">pathname)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">24</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">25</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">/**</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">26</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* Configura la función \`t\` para el idioma indicado.</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">27</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* </span><span style="--0:#FA8D3E;--0fs:italic">@param</span><span style="--0:#787B8099;--0fs:italic"> </span><span style="--0:#5C6166;--0fs:italic">lang</span><span style="--0:#787B8099;--0fs:italic"> - El idioma deseado.</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">28</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* </span><span style="--0:#FA8D3E;--0fs:italic">@param</span><span style="--0:#787B8099;--0fs:italic"> </span><span style="--0:#5C6166;--0fs:italic">defaultPage</span><span style="--0:#787B8099;--0fs:italic"> - Indica la página por defecto.</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">29</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">*/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">30</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">useTranslations</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">lang</span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Lang</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">defaultPage</span><span style="--0:#ED9366">?:</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Page</span><span style="--0:#5C6166">) {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">31</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">/**</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">32</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic">   </span></span><span style="--0:#787B8099;--0fs:italic">* Devuelve el texto traducido en la página por defecto o en la especificada.</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">33</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic">   </span></span><span style="--0:#787B8099;--0fs:italic">* </span><span style="--0:#FA8D3E;--0fs:italic">@param</span><span style="--0:#787B8099;--0fs:italic"> </span><span style="--0:#5C6166;--0fs:italic">page</span><span style="--0:#787B8099;--0fs:italic"> - Especifica la página, e.g. \`home\`, \`about\`, etc. La clave es de un solo nivel, por tanto \`home.title\` no es válido.</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">34</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic">   </span></span><span style="--0:#787B8099;--0fs:italic">*/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">35</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">return</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">t</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">page</span><span style="--0:#ED9366">?:</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Page</span><span style="--0:#5C6166">)</span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">any</span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">36</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> lang$ </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> lang </span><span style="--0:#ED9366">in</span><span style="--0:#5C6166"> LANGUAGES </span><span style="--0:#ED9366">?</span><span style="--0:#5C6166"> lang </span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> DEFAULT_LANGUAGE</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">37</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> page$ </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> page </span><span style="--0:#ED9366">??</span><span style="--0:#5C6166"> defaultPage</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">38</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">39</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">return</span><span style="--0:#5C6166"> page$ </span><span style="--0:#ED9366">?</span><span style="--0:#5C6166"> TRANSLATIONS[lang$][page$] </span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">''</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">40</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">41</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import {  DEFAULT_LANGUAGE,  LANGUAGES,  TRANSLATIONS,  type Lang,  type Page} from &#x27;./config&#x27;/** * Obtiene el idioma por el pathname. * @param pathname */export function getLangFromPathname(pathname: string) {  const [, lang] = pathname.split(&#x27;/&#x27;)  return lang as Lang}/** * Obtiene el idioma por un objeto URL. * @param url */export const getLanguageFromUrl = (url: URL) =>  getLangFromPathname(url.pathname)/** * Configura la función &#x60;t&#x60; para el idioma indicado. * @param lang - El idioma deseado. * @param defaultPage - Indica la página por defecto. */export function useTranslations(lang: Lang, defaultPage?: Page) {  /**   * Devuelve el texto traducido en la página por defecto o en la especificada.   * @param page - Especifica la página, e.g. &#x60;home&#x60;, &#x60;about&#x60;, etc. La clave es de un solo nivel, por tanto &#x60;home.title&#x60; no es válido.   */  return function t(page?: Page): any {    const lang$ = lang in LANGUAGES ? lang : DEFAULT_LANGUAGE    const page$ = page ?? defaultPage    return page$ ? TRANSLATIONS[lang$][page$] : &#x27;&#x27;  }}"><div></div></button></div></figure></div>
<p>Por último, puedes añadir algunos <em>import aliases</em> útiles a tu archivo <code>tsconfig.json</code>.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">{</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#E65050">...,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">  </span><span style="--0:#55B4D4">"compilerOptions"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D4">"baseUrl"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"."</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D4">"paths"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">      </span><span style="--0:#55B4D4">"@i18n/*"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> [</span><span style="--0:#86B300">"src/i18n/*"</span><span style="--0:#5C6166">]</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">      </span><span style="--0:#55B4D4">"@layouts/*"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> [</span><span style="--0:#86B300">"src/layouts/*"</span><span style="--0:#5C6166">]</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent">      </span><span style="--0:#55B4D4">"@components/*"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> [</span><span style="--0:#86B300">"src/components/*"</span><span style="--0:#5C6166">]</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  ...,  &#x22;compilerOptions&#x22;: {    &#x22;baseUrl&#x22;: &#x22;.&#x22;,    &#x22;paths&#x22;: {      &#x22;@i18n/*&#x22;: [&#x22;src/i18n/*&#x22;],      &#x22;@layouts/*&#x22;: [&#x22;src/layouts/*&#x22;],      &#x22;@components/*&#x22;: [&#x22;src/components/*&#x22;]    }  }}"><div></div></button></div></figure></div>
<h2 id="componentes">Componentes</h2>
<p>Para poder cambiar de idioma, crea el archivo <code>src/i18n/LanguagePicker.astro</code>. Yo os dejo dos opciones: un seleccionable o una lista.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> { LANGUAGES</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> LOCALES</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">type</span><span style="--0:#5C6166"> Lang } </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"./config"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> url </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">url</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> origin </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> url</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">origin</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> [</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> lang</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">...</span><span style="--0:#5C6166">slug] </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> url</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">pathname</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">split</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"/"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">&#x3C;!-- OPCIÓN 01 --></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span style="--0:#FA8D3E">{</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">lang </span><span style="--0:#ED9366">in</span><span style="--0:#5C6166"> LANGUAGES </span><span style="--0:#ED9366">&#x26;&#x26;</span><span style="--0:#5C6166"> (</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">select</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span class="indent">      </span><span style="--0:#F2AE49">id</span><span style="--0:#ED9366">=</span><span style="--0:#86B300">"lang-selector"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span class="indent">      </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">option</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">value</span><span style="--0:#ED9366">=</span><span style="--0:#86B300">""</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">disabled</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">selected</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span class="indent">        </span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">LANGUAGES[lang </span><span style="--0:#FA8D3E">as</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Lang</span><span style="--0:#5C6166">]</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span class="indent">      </span><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">option</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code"><span class="indent">      </span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">Object</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">entries</span><span style="--0:#5C6166">(LANGUAGES)</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">map</span><span style="--0:#5C6166">(([</span><span style="--0:#A37ACC">l</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">label</span><span style="--0:#5C6166">]) </span><span style="--0:#FA8D3E">=></span><span style="--0:#5C6166"> (</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code"><span class="indent">        </span><span style="--0:#55B4D480">&#x3C;></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code"><span class="indent">          </span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">l </span><span style="--0:#ED9366">!==</span><span style="--0:#5C6166"> lang </span><span style="--0:#ED9366">&#x26;&#x26;</span><span style="--0:#5C6166"> (</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">20</div></div><div class="code"><span class="indent">            </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">option</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">value</span><span style="--0:#ED9366">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#86B300">\`</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">origin</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">/</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">l</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">/</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">slug</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">join</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"/"</span><span style="--0:#5C6166">)</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">\`</span><span style="--0:#FA8D3E">}</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">21</div></div><div class="code"><span class="indent">              </span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">label</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">22</div></div><div class="code"><span class="indent">            </span><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">option</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">23</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">          </span></span><span style="--0:#5C6166">)</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">24</div></div><div class="code"><span class="indent">        </span><span style="--0:#55B4D480">&#x3C;/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">25</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">      </span></span><span style="--0:#5C6166">))</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">26</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">select</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">27</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">28</div></div><div class="code"><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">29</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">30</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">&#x3C;!-- OPCIÓN 02 --></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">31</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">ul</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">32</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">{</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">33</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">Object</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">entries</span><span style="--0:#5C6166">(LANGUAGES)</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">map</span><span style="--0:#5C6166">(([</span><span style="--0:#A37ACC">l</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">label</span><span style="--0:#5C6166">]) </span><span style="--0:#FA8D3E">=></span><span style="--0:#5C6166"> (</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">34</div></div><div class="code"><span class="indent">      </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">li</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">35</div></div><div class="code"><span class="indent">        </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">a</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">36</div></div><div class="code"><span class="indent">          </span><span style="--0:#F2AE49">href</span><span style="--0:#ED9366">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#86B300">\`</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">origin</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">/</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">l</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">/</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">slug</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">join</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"/"</span><span style="--0:#5C6166">)</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">\`</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">37</div></div><div class="code"><span class="indent">          </span><span style="--0:#F2AE49">hreflang</span><span style="--0:#ED9366">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">LOCALES[l </span><span style="--0:#FA8D3E">as</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">keyof</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">typeof</span><span style="--0:#5C6166"> LOCALES]</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">38</div></div><div class="code"><span class="indent">        </span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">39</div></div><div class="code"><span class="indent">          </span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">label</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">40</div></div><div class="code"><span class="indent">        </span><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">a</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">41</div></div><div class="code"><span class="indent">      </span><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">li</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">42</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">))</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">43</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">44</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">ul</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">45</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">46</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">script</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">47</div></div><div class="code"><span class="indent">  </span><span style="--0:#787B8099;--0fs:italic">// solo para la opción 1</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">48</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">optionsAsLinks</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">selector</span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">string</span><span style="--0:#5C6166">) {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">49</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> selectElem </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> document</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">querySelector</span><span style="--0:#5C6166">(selector) </span><span style="--0:#FA8D3E">as</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">HTMLSelectElement</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">50</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">selectElem</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">addEventListener</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"change"</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> () </span><span style="--0:#FA8D3E">=></span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">51</div></div><div class="code"><span class="indent">      </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> selectedIndex </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> selectElem</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">selectedIndex</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">52</div></div><div class="code"><span class="indent">      </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> (selectElem</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">options[selectedIndex]</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">value) {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">53</div></div><div class="code"><span class="indent">        </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> url </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> selectElem</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">options[selectedIndex]</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">value</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">54</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">        </span></span><span style="--0:#5C6166">window</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">location </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> url </span><span style="--0:#FA8D3E">as</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">string</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">&#x26;</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Location</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">55</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">      </span></span><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">56</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">})</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">57</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">58</div></div><div class="code"><span class="indent">  </span><span style="--0:#F2AE49">optionsAsLinks</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"#lang-selector"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">59</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">script</span><span style="--0:#55B4D480">></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---import { LANGUAGES, LOCALES, type Lang } from &#x22;./config&#x22;const url = Astro.urlconst origin = url.originconst [, lang, ...slug] = url.pathname.split(&#x22;/&#x22;)---<!-- OPCIÓN 01 -->{  lang in LANGUAGES &#x26;&#x26; (    <select      id=&#x22;lang-selector&#x22;    >      <option value=&#x22;&#x22; disabled selected>        {LANGUAGES[lang as Lang]}      </option>      {Object.entries(LANGUAGES).map(([l, label]) => (        <>          {l !== lang &#x26;&#x26; (            <option value={&#x60;\${origin}/\${l}/\${slug.join(&#x22;/&#x22;)}&#x60;}>              {label}            </option>          )}        </>      ))}    </select>  )}<!-- OPCIÓN 02 --><ul>  {    Object.entries(LANGUAGES).map(([l, label]) => (      <li>        <a          href={&#x60;\${origin}/\${l}/\${slug.join(&#x22;/&#x22;)}&#x60;}          hreflang={LOCALES[l as keyof typeof LOCALES]}        >          {label}        </a>      </li>    ))  }</ul><script>  // solo para la opción 1  function optionsAsLinks(selector: string) {    const selectElem = document.querySelector(selector) as HTMLSelectElement    selectElem.addEventListener(&#x22;change&#x22;, () => {      const selectedIndex = selectElem.selectedIndex      if (selectElem.options[selectedIndex].value) {        const url = selectElem.options[selectedIndex].value        window.location = url as string &#x26; Location      }    })  }  optionsAsLinks(&#x22;#lang-selector&#x22;)<\/script>"><div></div></button></div></figure></div>
<p>Hay ciertos casos en los que es útil poder establecer etiquetas html invariables a cada idioma sin tener que repetirlo en todos los <code>[language].json</code>, para eso en <code>src/i18n/Trans.astro</code> añade lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> { DEFAULT_LANGUAGE</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">type</span><span style="--0:#5C6166"> Page } </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"./config"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> { getLanguageFromUrl</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> useTranslations } </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"./utils"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> { replaceTextTargetsByTemplate } </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"./languageTarget"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#FA8D3E">interface</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Props</span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">page</span><span style="--0:#ED9366">?:</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Page</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">section</span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">string</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">class</span><span style="--0:#ED9366">?:</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">string</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> { page</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> section</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> class: className } </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">props</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> lang </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">getLanguageFromUrl</span><span style="--0:#5C6166">(Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">url)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> t </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">useTranslations</span><span style="--0:#5C6166">(lang</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> page)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> slot </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">await</span><span style="--0:#5C6166"> Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">slots</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">render</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"default"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> text </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> lang </span><span style="--0:#ED9366">===</span><span style="--0:#5C6166"> DEFAULT_LANGUAGE </span><span style="--0:#ED9366">?</span><span style="--0:#5C6166"> slot </span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> (</span><span style="--0:#F2AE49">t</span><span style="--0:#5C6166">()[section] </span><span style="--0:#FA8D3E">as</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">string</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">20</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">p</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">class</span><span style="--0:#5C6166B3">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">className</span><span style="--0:#FA8D3E">}</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">set:html</span><span style="--0:#5C6166B3">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#F2AE49">replaceTextTargetsByTemplate</span><span style="--0:#5C6166">(slot</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> text)</span><span style="--0:#FA8D3E">}</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D480">/></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---import { DEFAULT_LANGUAGE, type Page } from &#x22;./config&#x22;import { getLanguageFromUrl, useTranslations } from &#x22;./utils&#x22;import { replaceTextTargetsByTemplate } from &#x22;./languageTarget&#x22;interface Props {  page?: Page  section: string  class?: string}const { page, section, class: className } = Astro.propsconst lang = getLanguageFromUrl(Astro.url)const t = useTranslations(lang, page)const slot = await Astro.slots.render(&#x22;default&#x22;)const text = lang === DEFAULT_LANGUAGE ? slot : (t()[section] as string)---<p class={className} set:html={replaceTextTargetsByTemplate(slot, text)} />"><div></div></button></div></figure></div>
<p>Además, tienes que crear el archivo <code>src/i18n/languageTarget.ts</code>.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">/**</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* Obtiene las etiquetas de un texto HTML.</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* </span><span style="--0:#FA8D3E;--0fs:italic">@param</span><span style="--0:#787B8099;--0fs:italic"> </span><span style="--0:#5C6166;--0fs:italic">html</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* </span><span style="--0:#FA8D3E;--0fs:italic">@returns</span><span style="--0:#787B8099;--0fs:italic"> Retorna un array con las etiquetas, que incluyen \`&#x3C;>\` y \`&#x3C;/>\`.</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">*/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">getHtmlTargets</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">html</span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">string</span><span style="--0:#5C6166">) {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> targets</span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">string</span><span style="--0:#5C6166">[] </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> []</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">let</span><span style="--0:#5C6166"> index </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">0</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">while</span><span style="--0:#5C6166"> (index </span><span style="--0:#ED9366">&#x3C;</span><span style="--0:#5C6166"> html</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">length) {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> (html[index] </span><span style="--0:#ED9366">===</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'&#x3C;'</span><span style="--0:#5C6166">) {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent">      </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> endTarget </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> html</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">indexOf</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">'>'</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> index)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">      </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> (endTarget </span><span style="--0:#ED9366">!==</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">-</span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">) {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span class="indent">        </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> fullTarget </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> html</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">slice</span><span style="--0:#5C6166">(index</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> endTarget </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">        </span></span><span style="--0:#5C6166">targets</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">push</span><span style="--0:#5C6166">(fullTarget)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">        </span></span><span style="--0:#5C6166">index </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> endTarget </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">1</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code"><span class="indent">        </span><span style="--0:#FA8D3E">continue</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">      </span></span><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">20</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">index</span><span style="--0:#ED9366">++</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">21</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">22</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">return</span><span style="--0:#5C6166"> targets</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">23</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">24</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">25</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">/**</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">26</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* Sustituye las etiquetas numerales (\`&#x3C;0>&#x3C;/0>\`, \`&#x3C;1>&#x3C;/1>\`, etc.) de un texto por las etiquetas de una plantilla.</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">27</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* > El texto y el plantilla han de tener el mismo número de etiquetas.</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">28</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* </span><span style="--0:#FA8D3E;--0fs:italic">@param</span><span style="--0:#787B8099;--0fs:italic"> </span><span style="--0:#5C6166;--0fs:italic">template</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">29</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">* </span><span style="--0:#FA8D3E;--0fs:italic">@param</span><span style="--0:#787B8099;--0fs:italic"> </span><span style="--0:#5C6166;--0fs:italic">text</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">30</div></div><div class="code"><span class="indent"><span style="--0:#787B8099;--0fs:italic"> </span></span><span style="--0:#787B8099;--0fs:italic">*/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">31</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">function</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">replaceTextTargetsByTemplate</span><span style="--0:#5C6166">(</span><span style="--0:#A37ACC">template</span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">string</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">text</span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">string</span><span style="--0:#5C6166">) {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">32</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> (</span><span style="--0:#ED9366">!</span><span style="--0:#5C6166">text) </span><span style="--0:#FA8D3E">throw</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">new</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">Error</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">'Text is undefined'</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">33</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">34</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> targets </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">getHtmlTargets</span><span style="--0:#5C6166">(template)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">35</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">return</span><span style="--0:#5C6166"> text</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">replace</span><span style="--0:#5C6166">(</span><span style="--0:#4CBF99">/&#x3C;(\\d</span><span style="--0:#ED9366">+</span><span style="--0:#4CBF99">)>(.</span><span style="--0:#ED9366">*?</span><span style="--0:#4CBF99">)&#x3C;\\/</span><span style="--0:#FA8D3E">\\1</span><span style="--0:#4CBF99">>/</span><span style="--0:#FA8D3E">g</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> (</span><span style="--0:#A37ACC">_</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">pos</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">cont</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">=></span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">36</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> num </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">parseInt</span><span style="--0:#5C6166">(pos)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">37</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">return</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">\`</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">targets[num </span><span style="--0:#ED9366">*</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166">]</span><span style="--0:#FA8D3E">}\${</span><span style="--0:#5C6166">cont</span><span style="--0:#FA8D3E">}\${</span><span style="--0:#5C6166">targets[num </span><span style="--0:#ED9366">*</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">2</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">+</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">1</span><span style="--0:#5C6166">]</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">\`</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">38</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">})</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">39</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="/** * Obtiene las etiquetas de un texto HTML. * @param html * @returns Retorna un array con las etiquetas, que incluyen &#x60;<>&#x60; y &#x60;</>&#x60;. */function getHtmlTargets(html: string) {  const targets: string[] = []  let index = 0  while (index < html.length) {    if (html[index] === &#x27;<&#x27;) {      const endTarget = html.indexOf(&#x27;>&#x27;, index)      if (endTarget !== -1) {        const fullTarget = html.slice(index, endTarget + 1)        targets.push(fullTarget)        index = endTarget + 1        continue      }    }    index++  }  return targets}/** * Sustituye las etiquetas numerales (&#x60;<0></0>&#x60;, &#x60;<1></1>&#x60;, etc.) de un texto por las etiquetas de una plantilla. * > El texto y el plantilla han de tener el mismo número de etiquetas. * @param template * @param text */export function replaceTextTargetsByTemplate(template: string, text: string) {  if (!text) throw new Error(&#x27;Text is undefined&#x27;)  const targets = getHtmlTargets(template)  return text.replace(/<(\\d+)>(.*?)<\\/\\1>/g, (_, pos, cont) => {    const num = parseInt(pos)    return &#x60;\${targets[num * 2]}\${cont}\${targets[num * 2 + 1]}&#x60;  })}"><div></div></button></div></figure></div>
<p>Para el SEO, crea el archivo <code>src/i18n/I18nHeaders.astro</code> con lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> { DEFAULT_LANGUAGE</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> LOCALES } </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"./config"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> [</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">...</span><span style="--0:#5C6166">path] </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">url</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">pathname</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">split</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"/"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">link</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">  </span><span style="--0:#F2AE49">rel</span><span style="--0:#5C6166B3">=</span><span style="--0:#86B300">"alternate"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent">  </span><span style="--0:#F2AE49">href</span><span style="--0:#5C6166B3">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#86B300">\`</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">url</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">origin</span><span style="--0:#FA8D3E">}\${</span><span style="--0:#5C6166">DEFAULT_LANGUAGE</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">/</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">path</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">join</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"/"</span><span style="--0:#5C6166">)</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">\`</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent">  </span><span style="--0:#F2AE49">hreflang</span><span style="--0:#5C6166B3">=</span><span style="--0:#86B300">"x-default"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span style="--0:#55B4D480">/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span style="--0:#FA8D3E">{</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">Object</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">keys</span><span style="--0:#5C6166">(LOCALES)</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">map</span><span style="--0:#5C6166">((</span><span style="--0:#A37ACC">l</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">=></span><span style="--0:#5C6166"> (</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">link</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span class="indent">      </span><span style="--0:#F2AE49">rel</span><span style="--0:#ED9366">=</span><span style="--0:#86B300">"alternate"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span class="indent">      </span><span style="--0:#F2AE49">href</span><span style="--0:#ED9366">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#86B300">\`</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">url</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">origin</span><span style="--0:#FA8D3E">}\${</span><span style="--0:#5C6166">l</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">/</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">path</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">join</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">"/"</span><span style="--0:#5C6166">)</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">\`</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span class="indent">      </span><span style="--0:#F2AE49">hreflang</span><span style="--0:#ED9366">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">LOCALES[l </span><span style="--0:#FA8D3E">as</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">keyof</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">typeof</span><span style="--0:#5C6166"> LOCALES]</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">))</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code"><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">20</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">21</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">meta</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">property</span><span style="--0:#5C6166B3">=</span><span style="--0:#86B300">"og:locale"</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">content</span><span style="--0:#5C6166B3">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">LOCALES[DEFAULT_LANGUAGE]</span><span style="--0:#FA8D3E">}</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D480">/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">22</div></div><div class="code"><span style="--0:#FA8D3E">{</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">23</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">Object</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">keys</span><span style="--0:#5C6166">(LOCALES)</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">map</span><span style="--0:#5C6166">((</span><span style="--0:#A37ACC">l</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">=></span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">24</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">if</span><span style="--0:#5C6166"> (l </span><span style="--0:#ED9366">===</span><span style="--0:#5C6166"> DEFAULT_LANGUAGE) </span><span style="--0:#FA8D3E">return</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">25</div></div><div class="code"><span class="indent">    </span><span style="--0:#FA8D3E">return</span><span style="--0:#5C6166"> (</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">26</div></div><div class="code"><span class="indent">      </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">meta</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">27</div></div><div class="code"><span class="indent">        </span><span style="--0:#F2AE49">property</span><span style="--0:#ED9366">=</span><span style="--0:#86B300">"og:locale:alternate"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">28</div></div><div class="code"><span class="indent">        </span><span style="--0:#F2AE49">content</span><span style="--0:#ED9366">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">LOCALES[l </span><span style="--0:#FA8D3E">as</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">keyof</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">typeof</span><span style="--0:#5C6166"> LOCALES]</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">29</div></div><div class="code"><span class="indent">      </span><span style="--0:#55B4D480">/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">30</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">31</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">})</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">32</div></div><div class="code"><span style="--0:#FA8D3E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---import { DEFAULT_LANGUAGE, LOCALES } from &#x22;./config&#x22;const [, , ...path] = Astro.url.pathname.split(&#x22;/&#x22;)---<link  rel=&#x22;alternate&#x22;  href={&#x60;\${Astro.url.origin}\${DEFAULT_LANGUAGE}/\${path.join(&#x22;/&#x22;)}&#x60;}  hreflang=&#x22;x-default&#x22;/>{  Object.keys(LOCALES).map((l) => (    <link      rel=&#x22;alternate&#x22;      href={&#x60;\${Astro.url.origin}\${l}/\${path.join(&#x22;/&#x22;)}&#x60;}      hreflang={LOCALES[l as keyof typeof LOCALES]}    />  ))}<meta property=&#x22;og:locale&#x22; content={LOCALES[DEFAULT_LANGUAGE]} />{  Object.keys(LOCALES).map((l) => {    if (l === DEFAULT_LANGUAGE) return    return (      <meta        property=&#x22;og:locale:alternate&#x22;        content={LOCALES[l as keyof typeof LOCALES]}      />    )  })}"><div></div></button></div></figure></div>
<h2 id="plantillas">Plantillas</h2>
<p>Para que el navegador sepa en que idioma se encuentra la página, es importante añadir el atributo <code>lang</code> en la etiqueta <code>html</code>, para ello añade lo siguiente en el archivo <code>src/layouts/BaseLayout.astro</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> I18NHeaders </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"@i18n/I18nHeaders.astro"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> { getLanguageFromUrl } </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"@i18n/utils"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#FA8D3E">interface</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Props</span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">title</span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D4">string</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> lang </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">getLanguageFromUrl</span><span style="--0:#5C6166">(Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">url)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">html</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">lang</span><span style="--0:#5C6166B3">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">lang</span><span style="--0:#FA8D3E">}</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">  </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">head</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">meta</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">charset</span><span style="--0:#5C6166B3">=</span><span style="--0:#86B300">"utf-8"</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D480">/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">meta</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">name</span><span style="--0:#5C6166B3">=</span><span style="--0:#86B300">"viewport"</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">content</span><span style="--0:#5C6166B3">=</span><span style="--0:#86B300">"width=device-width"</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D480">/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">meta</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">name</span><span style="--0:#5C6166B3">=</span><span style="--0:#86B300">"generator"</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">content</span><span style="--0:#5C6166B3">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">generator</span><span style="--0:#FA8D3E">}</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D480">/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">link</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">rel</span><span style="--0:#5C6166B3">=</span><span style="--0:#86B300">"shortcut icon"</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">href</span><span style="--0:#5C6166B3">=</span><span style="--0:#86B300">"/favicon.svg"</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">type</span><span style="--0:#5C6166B3">=</span><span style="--0:#86B300">"image/x-icon"</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D480">/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">title</span><span style="--0:#55B4D480">></span><span style="--0:#FA8D3E">{</span><span style="--0:#5C6166">Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">props</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">title</span><span style="--0:#FA8D3E">}</span><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">title</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#399EE6">I18NHeaders</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D480">/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">20</div></div><div class="code"><span class="indent">  </span><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">head</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">21</div></div><div class="code"><span class="indent">  </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">body</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">22</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">slot</span><span style="--0:#5C6166"> </span><span style="--0:#55B4D480">/></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">23</div></div><div class="code"><span class="indent">  </span><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">body</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">24</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">html</span><span style="--0:#55B4D480">></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---import I18NHeaders from &#x22;@i18n/I18nHeaders.astro&#x22;import { getLanguageFromUrl } from &#x22;@i18n/utils&#x22;interface Props {  title: string}const lang = getLanguageFromUrl(Astro.url)---<html lang={lang}>  <head>    <meta charset=&#x22;utf-8&#x22; />    <meta name=&#x22;viewport&#x22; content=&#x22;width=device-width&#x22; />    <meta name=&#x22;generator&#x22; content={Astro.generator} />    <link rel=&#x22;shortcut icon&#x22; href=&#x22;/favicon.svg&#x22; type=&#x22;image/x-icon&#x22; />    <title>{Astro.props.title}</title>    <I18NHeaders />  </head>  <body>    <slot />  </body></html>"><div></div></button></div></figure></div>
<h2 id="páginas">Páginas</h2>
<h3 id="indexastro"><code>index.astro</code></h3>
<p>Como comenté al principio, este sistema no está configurado para que la ruta raiz sea el idioma predeterminado, por lo tanto hay que redirigir al usuario añadiendo lo siguiente en <code>src/pages/index.astro</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> { DEFAULT_LANGUAGE } </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"@i18n/config"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">meta</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent">  </span><span style="--0:#F2AE49">http-equiv</span><span style="--0:#5C6166B3">=</span><span style="--0:#86B300">"refresh"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">  </span><span style="--0:#F2AE49">content</span><span style="--0:#5C6166B3">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#86B300">\`0;url=/</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">DEFAULT_LANGUAGE</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">/\`</span><span style="--0:#FA8D3E">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span style="--0:#55B4D480">/></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---import { DEFAULT_LANGUAGE } from &#x22;@i18n/config&#x22;---<meta  http-equiv=&#x22;refresh&#x22;  content={&#x60;0;url=/\${DEFAULT_LANGUAGE}/&#x60;}/>"><div></div></button></div></figure></div>
<p>El problema con esto es que las redirecciones por el lado del cliente son penalizantes para el SEO, por lo que una mejor opción sería usar el modo o <code>hybrid</code> de Astro y cambiar lo anterior por:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> { DEFAULT_LANGUAGE</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> LANGUAGES } </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">'@i18n/config'</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> prerender </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">false</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> headers </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> Object</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">fromEntries</span><span style="--0:#5C6166">(Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">request</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">headers)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> userLanguage </span><span style="--0:#ED9366">=</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">headers[</span><span style="--0:#86B300">'accept-language'</span><span style="--0:#5C6166">]</span><span style="--0:#ED9366">?</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent">  </span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">split</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">','</span><span style="--0:#5C6166">)[</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">]</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent">  </span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">split</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">'-'</span><span style="--0:#5C6166">)[</span><span style="--0:#A37ACC">0</span><span style="--0:#5C6166">]</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span style="--0:#5C6166">const lang </span><span style="--0:#ED9366">=</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">userLanguage </span><span style="--0:#ED9366">!==</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">undefined</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">&#x26;&#x26;</span><span style="--0:#5C6166"> userLanguage </span><span style="--0:#ED9366">in</span><span style="--0:#5C6166"> LANGUAGES</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span class="indent">  </span><span style="--0:#ED9366">?</span><span style="--0:#5C6166"> userLanguage</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span class="indent">  </span><span style="--0:#ED9366">:</span><span style="--0:#5C6166"> DEFAULT_LANGUAGE</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code"><span style="--0:#5C6166">return Astro</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">redirect</span><span style="--0:#5C6166">(</span><span style="--0:#86B300">\`/</span><span style="--0:#FA8D3E">\${</span><span style="--0:#5C6166">lang</span><span style="--0:#FA8D3E">}</span><span style="--0:#86B300">/\`</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#A37ACC">301</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span style="--0:#ED9366">---</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---import { DEFAULT_LANGUAGE, LANGUAGES } from &#x27;@i18n/config&#x27;export const prerender = falseconst headers = Object.fromEntries(Astro.request.headers)const userLanguage =  headers[&#x27;accept-language&#x27;]?  .split(&#x27;,&#x27;)[0]  .split(&#x27;-&#x27;)[0]const lang =  userLanguage !== undefined &#x26;&#x26; userLanguage in LANGUAGES  ? userLanguage  : DEFAULT_LANGUAGEreturn Astro.redirect(&#x60;/\${lang}/&#x60;, 301)---"><div></div></button></div></figure></div>
<h3 id="lang"><code>[lang]</code></h3>
<p>Las páginas para cada idioma se generan gracias a las <a href="https://docs.astro.build/en/core-concepts/routing/#static-ssg-mode" rel="noopener noreferrer">rutas <span>dinámicas<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10v10M7 17 17 7"></path></svg></span></a> de Astro, lo único malo es que hay que indicar en todas las páginas los idiomas en los que se va ha traducir.</p>
<p>Crea las traducciones en los <code>[languages].json</code>:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">{</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#55B4D4">"home"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D4">"head_title"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"Home"</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D4">"title"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"Welcome!"</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D4">"subtitle"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"This is an Astro test with i18n."</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;home&#x22;: {    &#x22;head_title&#x22;: &#x22;Home&#x22;,    &#x22;title&#x22;: &#x22;Welcome!&#x22;,    &#x22;subtitle&#x22;: &#x22;This is an Astro test with i18n.&#x22;  }}"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">{</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#55B4D4">"home"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D4">"head_title"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"Inicio"</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D4">"title"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"¡Bienvenido!"</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D4">"subtitle"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"Esto es un prueba de Astro con i18n."</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;home&#x22;: {    &#x22;head_title&#x22;: &#x22;Inicio&#x22;,    &#x22;title&#x22;: &#x22;¡Bienvenido!&#x22;,    &#x22;subtitle&#x22;: &#x22;Esto es un prueba de Astro con i18n.&#x22;  }}"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5C6166">{</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent">  </span><span style="--0:#55B4D4">"home"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D4">"head_title"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"Début"</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D4">"title"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"Accueillir!"</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code"><span class="indent">    </span><span style="--0:#55B4D4">"subtitle"</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"Il s'agit d'un test Astro avec i18n."</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;home&#x22;: {    &#x22;head_title&#x22;: &#x22;Début&#x22;,    &#x22;title&#x22;: &#x22;Accueillir!&#x22;,    &#x22;subtitle&#x22;: &#x22;Il s&#x27;agit d&#x27;un test Astro avec i18n.&#x22;  }}"><div></div></button></div></figure></div>
<p>Crea el directorio <code>src/pages/[lang]</code>.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#5c6166">pages/</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span class="indent"><span style="--0:#5c6166">  </span></span><span style="--0:#5c6166">index.astro</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span class="indent"><span style="--0:#5c6166">    </span></span><span style="--0:#5c6166">[lang]/</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="pages/  index.astro    [lang]/"><div></div></button></div></figure></div>
<p>En <code>src/pages/[lang]/index.astro</code> añade lo siguiente:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">1</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">2</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> BaseLayout </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"@layouts/BaseLayout.astro"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">3</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> { LANGUAGES_ARRAY</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">type</span><span style="--0:#5C6166"> Lang } </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"@i18n/config"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">4</div></div><div class="code"><span style="--0:#FA8D3E">import</span><span style="--0:#5C6166"> { useTranslations } </span><span style="--0:#FA8D3E">from</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"@i18n/utils"</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">5</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">6</div></div><div class="code"><span style="--0:#FA8D3E">export</span><span style="--0:#5C6166"> </span><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">getStaticPaths</span><span style="--0:#5C6166"> </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> () </span><span style="--0:#FA8D3E">=></span><span style="--0:#5C6166"> {</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">7</div></div><div class="code"><span class="indent">  </span><span style="--0:#FA8D3E">return</span><span style="--0:#5C6166"> LANGUAGES_ARRAY</span><span style="--0:#ED9366">.</span><span style="--0:#F2AE49">map</span><span style="--0:#5C6166">((</span><span style="--0:#A37ACC">lang</span><span style="--0:#5C6166">) </span><span style="--0:#FA8D3E">=></span><span style="--0:#5C6166"> ({</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">8</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">    </span></span><span style="--0:#5C6166">params</span><span style="--0:#5C6166B3">:</span><span style="--0:#5C6166"> { lang }</span><span style="--0:#5C6166B3">,</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">9</div></div><div class="code"><span class="indent"><span style="--0:#5C6166">  </span></span><span style="--0:#5C6166">}))</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">10</div></div><div class="code"><span style="--0:#5C6166">}</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">11</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">12</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> { lang } </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> Astro</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">params</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">13</div></div><div class="code"><span style="--0:#FA8D3E">const</span><span style="--0:#5C6166"> t </span><span style="--0:#ED9366">=</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">useTranslations</span><span style="--0:#5C6166">(lang </span><span style="--0:#FA8D3E">as</span><span style="--0:#5C6166"> </span><span style="--0:#399EE6">Lang</span><span style="--0:#5C6166B3">,</span><span style="--0:#5C6166"> </span><span style="--0:#86B300">"home"</span><span style="--0:#5C6166">)</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">14</div></div><div class="code"><span style="--0:#787B8099;--0fs:italic">---</span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">15</div></div><div class="code">
</div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">16</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#399EE6">BaseLayout</span><span style="--0:#5C6166"> </span><span style="--0:#F2AE49">title</span><span style="--0:#5C6166B3">=</span><span style="--0:#FA8D3E">{</span><span style="--0:#F2AE49">t</span><span style="--0:#5C6166">()</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">head_title</span><span style="--0:#FA8D3E">}</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">17</div></div><div class="code"><span class="indent">  </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">h1</span><span style="--0:#55B4D480">></span><span style="--0:#FA8D3E">{</span><span style="--0:#F2AE49">t</span><span style="--0:#5C6166">()</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">title</span><span style="--0:#FA8D3E">}</span><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">h1</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">18</div></div><div class="code"><span class="indent">  </span><span style="--0:#55B4D480">&#x3C;</span><span style="--0:#55B4D4">p</span><span style="--0:#55B4D480">></span><span style="--0:#FA8D3E">{</span><span style="--0:#F2AE49">t</span><span style="--0:#5C6166">()</span><span style="--0:#ED9366">.</span><span style="--0:#5C6166">subtitle</span><span style="--0:#FA8D3E">}</span><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#55B4D4">p</span><span style="--0:#55B4D480">></span></div></div><div class="ec-line"><div class="gutter"><div class="ln" aria-hidden="true">19</div></div><div class="code"><span style="--0:#55B4D480">&#x3C;/</span><span style="--0:#399EE6">BaseLayout</span><span style="--0:#55B4D480">></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---import BaseLayout from &#x22;@layouts/BaseLayout.astro&#x22;import { LANGUAGES_ARRAY, type Lang } from &#x22;@i18n/config&#x22;import { useTranslations } from &#x22;@i18n/utils&#x22;export const getStaticPaths = () => {  return LANGUAGES_ARRAY.map((lang) => ({    params: { lang },  }))}const { lang } = Astro.paramsconst t = useTranslations(lang as Lang, &#x22;home&#x22;)---<BaseLayout title={t().head_title}>  <h1>{t().title}</h1>  <p>{t().subtitle}</p></BaseLayout>"><div></div></button></div></figure></div>
<p>Ahora deberías poder ejecutar <code>npm run dev</code> y tener una página i18n.</p>
<p>Si quieres ver un ejemplo más completo puedes ir a este <a href="https://github.com/michelangelo-valderrama/test-astro-i18n/" rel="noopener noreferrer">repositorio<span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10v10M7 17 17 7"></path></svg></span></a>, que tiene un blog y usa traducciones en los componentes.</p>`,t={title:"Implementando i18n en Astro",description:"Pequeña guía de cómo implementar i18n en Astro para tener páginas en múltiples idiomas.",pubDate:"2024-01-06T00:00:00.000Z",category:"tutorial",tags:["i18n","astro"],isDraft:!1},d="/home/imangelo/Documents/01_Projects/imangelo.dev/src/content/articles/i18n-astro.md",p=void 0;function A(){return`
Nuevo artículo, nuevo tutorial.

Aquí una “guía” de como implementar i18n en Astro. ¿Pero no existen ya librerias para eso? Pues sí, pero cuando yo las quise implementar no funcionaban, así que tocó crearse la propia. Además, hacerlo tú mismo te hace menos dependiente de terceros.

Tener una página en muchos idiomas es siempre un fastidio, pero a veces es una necesidad si una quiere que su página web sea más accesible. Pero yo me vi en esta necesidad porque me tocó migrar la web de IF7SPORTS de Angular a Astro. ¿Por qué se usó Angular para una página estática? Ni idea, pero tardaba 6 segundos en cargar y eso no era bueno. En el blog de la web escribí un muy pequeño artículo sobre la migración, os lo dejo [aquí](https://if7sports.com/es/blog/presenting-our-new-website/). La web también tenía diferentes idiomas, pero se usaba un sistema que yo he denominado _sistema de idiomas en base a directorios_, donde básicamente tienes una carpeta por cada idioma (aunque el idioma por defecto puede ser la carpeta raíz), llegando a una estructura tal que así:

\`\`\`
pages/
  index.html
  en/
    index.html
  fr/
    index.html
\`\`\`

De ello aprendí algo muy importante:

> Ni de coña vuelvo a tener que copiar una página entera para que esté en otro puto idioma.

Siempre que se añadía cualquier cosa a la web había que realizarlo mínimo dos veces y era horrible, por eso decidí crear el sistema de idiomas de otra manera, uno que he denominado _sistema de idiomas en base a archivos_, donde tienes las traducciones en archivos separados.

> Si quereis basar vuestra sistema de traducción en directorios y comprobar en carne propia por qué es un atentado contra la humanidad os dejo la receta de oficial Astro de cómo hacerlo [aquí](https://docs.astro.build/en/recipes/i18n/).

Cosa importante a decir ahora es que todas las rutas tiene el idioma como prefijo, e.g. \`/en/home\` o \`/es/home\`, por lo que la ruta raiz no es ningún idioma, e.g. \`/home\` es un 404, esto puede ser o no importante dependiendo de lo que buscas. Si quieres intentar hacer que la ruta raiz sea el idioma por defecto te deseo buena suerte y que dios te acompañe :>

---

## Configuración y utilidades

Crea el directorio \`src/i18n\`, donde estarán todos los scripts y componentes exclusivos de los idiomas, excepto las traducciones.

Cree la carpeta \`public/locales\` y dentro de ella, crea un archivo \`.json\` por cada idioma que quieras. En mi caso serán el Inglés, Español y Francés.

\`\`\`
public/
  locales/
    en.json
    es.json
    fr.json
\`\`\`

En \`src/i18n/config.ts\`, añade lo siguiente:

\`\`\`ts
import es from '../../public/locales/es.json'
import en from '../../public/locales/en.json'
import fr from '../../public/locales/fr.json'

export const LANGUAGES = {
  en: 'English',
  es: 'Español',
  fr: 'Français'
}

export const LOCALES = {
  en: 'en-GB',
  es: 'es-ES',
  fr: 'fr-FR'
}

export const LANGUAGES_ARRAY = Object.keys(LANGUAGES)

export const DEFAULT_LANGUAGE = 'en'

export const TRANSLATIONS = { en, es, fr }

export type Lang = keyof typeof TRANSLATIONS
export type Page = keyof (typeof TRANSLATIONS)[typeof DEFAULT_LANGUAGE]
\`\`\`

En \`config.ts\` se importan las traducciones, se configuran los idiomas, sus _locales_ y se hacen demás cosas útiles.

En el archivo \`src/i18n/utils.ts\`, añade lo siguiente:

\`\`\`ts
import {
  DEFAULT_LANGUAGE,
  LANGUAGES,
  TRANSLATIONS,
  type Lang,
  type Page
} from './config'

/**
 * Obtiene el idioma por el pathname.
 * @param pathname
 */
export function getLangFromPathname(pathname: string) {
  const [, lang] = pathname.split('/')
  return lang as Lang
}

/**
 * Obtiene el idioma por un objeto URL.
 * @param url
 */
export const getLanguageFromUrl = (url: URL) =>
  getLangFromPathname(url.pathname)

/**
 * Configura la función \`t\` para el idioma indicado.
 * @param lang - El idioma deseado.
 * @param defaultPage - Indica la página por defecto.
 */
export function useTranslations(lang: Lang, defaultPage?: Page) {
  /**
   * Devuelve el texto traducido en la página por defecto o en la especificada.
   * @param page - Especifica la página, e.g. \`home\`, \`about\`, etc. La clave es de un solo nivel, por tanto \`home.title\` no es válido.
   */
  return function t(page?: Page): any {
    const lang$ = lang in LANGUAGES ? lang : DEFAULT_LANGUAGE
    const page$ = page ?? defaultPage

    return page$ ? TRANSLATIONS[lang$][page$] : ''
  }
}
\`\`\`

Por último, puedes añadir algunos _import aliases_ útiles a tu archivo \`tsconfig.json\`.

\`\`\`json
{
  ...,
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@i18n/*": ["src/i18n/*"],
      "@layouts/*": ["src/layouts/*"],
      "@components/*": ["src/components/*"]
    }
  }
}
\`\`\`

## Componentes

Para poder cambiar de idioma, crea el archivo \`src/i18n/LanguagePicker.astro\`. Yo os dejo dos opciones: un seleccionable o una lista.

\`\`\`astro
---
import { LANGUAGES, LOCALES, type Lang } from "./config"
const url = Astro.url
const origin = url.origin
const [, lang, ...slug] = url.pathname.split("/")
---

<!-- OPCIÓN 01 -->
{
  lang in LANGUAGES && (
    <select
      id="lang-selector"
    >
      <option value="" disabled selected>
        {LANGUAGES[lang as Lang]}
      </option>
      {Object.entries(LANGUAGES).map(([l, label]) => (
        <>
          {l !== lang && (
            <option value={\`\${origin}/\${l}/\${slug.join("/")}\`}>
              {label}
            </option>
          )}
        </>
      ))}
    </select>
  )
}

<!-- OPCIÓN 02 -->
<ul>
  {
    Object.entries(LANGUAGES).map(([l, label]) => (
      <li>
        <a
          href={\`\${origin}/\${l}/\${slug.join("/")}\`}
          hreflang={LOCALES[l as keyof typeof LOCALES]}
        >
          {label}
        </a>
      </li>
    ))
  }
</ul>

<script>
  // solo para la opción 1
  function optionsAsLinks(selector: string) {
    const selectElem = document.querySelector(selector) as HTMLSelectElement
    selectElem.addEventListener("change", () => {
      const selectedIndex = selectElem.selectedIndex
      if (selectElem.options[selectedIndex].value) {
        const url = selectElem.options[selectedIndex].value
        window.location = url as string & Location
      }
    })
  }
  optionsAsLinks("#lang-selector")
<\/script>
\`\`\`

Hay ciertos casos en los que es útil poder establecer etiquetas html invariables a cada idioma sin tener que repetirlo en todos los \`[language].json\`, para eso en \`src/i18n/Trans.astro\` añade lo siguiente:

\`\`\`astro
---
import { DEFAULT_LANGUAGE, type Page } from "./config"
import { getLanguageFromUrl, useTranslations } from "./utils"
import { replaceTextTargetsByTemplate } from "./languageTarget"

interface Props {
  page?: Page
  section: string
  class?: string
}

const { page, section, class: className } = Astro.props
const lang = getLanguageFromUrl(Astro.url)
const t = useTranslations(lang, page)

const slot = await Astro.slots.render("default")
const text = lang === DEFAULT_LANGUAGE ? slot : (t()[section] as string)
---

<p class={className} set:html={replaceTextTargetsByTemplate(slot, text)} />
\`\`\`

Además, tienes que crear el archivo \`src/i18n/languageTarget.ts\`.

\`\`\`ts
/**
 * Obtiene las etiquetas de un texto HTML.
 * @param html
 * @returns Retorna un array con las etiquetas, que incluyen \`<>\` y \`</>\`.
 */
function getHtmlTargets(html: string) {
  const targets: string[] = []
  let index = 0
  while (index < html.length) {
    if (html[index] === '<') {
      const endTarget = html.indexOf('>', index)

      if (endTarget !== -1) {
        const fullTarget = html.slice(index, endTarget + 1)
        targets.push(fullTarget)
        index = endTarget + 1
        continue
      }
    }
    index++
  }
  return targets
}

/**
 * Sustituye las etiquetas numerales (\`<0></0>\`, \`<1></1>\`, etc.) de un texto por las etiquetas de una plantilla.
 * > El texto y el plantilla han de tener el mismo número de etiquetas.
 * @param template
 * @param text
 */
export function replaceTextTargetsByTemplate(template: string, text: string) {
  if (!text) throw new Error('Text is undefined')

  const targets = getHtmlTargets(template)
  return text.replace(/<(\\d+)>(.*?)<\\/\\1>/g, (_, pos, cont) => {
    const num = parseInt(pos)
    return \`\${targets[num * 2]}\${cont}\${targets[num * 2 + 1]}\`
  })
}
\`\`\`

Para el SEO, crea el archivo \`src/i18n/I18nHeaders.astro\` con lo siguiente:

\`\`\`astro
---
import { DEFAULT_LANGUAGE, LOCALES } from "./config"
const [, , ...path] = Astro.url.pathname.split("/")
---

<link
  rel="alternate"
  href={\`\${Astro.url.origin}\${DEFAULT_LANGUAGE}/\${path.join("/")}\`}
  hreflang="x-default"
/>
{
  Object.keys(LOCALES).map((l) => (
    <link
      rel="alternate"
      href={\`\${Astro.url.origin}\${l}/\${path.join("/")}\`}
      hreflang={LOCALES[l as keyof typeof LOCALES]}
    />
  ))
}

<meta property="og:locale" content={LOCALES[DEFAULT_LANGUAGE]} />
{
  Object.keys(LOCALES).map((l) => {
    if (l === DEFAULT_LANGUAGE) return
    return (
      <meta
        property="og:locale:alternate"
        content={LOCALES[l as keyof typeof LOCALES]}
      />
    )
  })
}
\`\`\`

## Plantillas

Para que el navegador sepa en que idioma se encuentra la página, es importante añadir el atributo \`lang\` en la etiqueta \`html\`, para ello añade lo siguiente en el archivo \`src/layouts/BaseLayout.astro\`:

\`\`\`astro
---
import I18NHeaders from "@i18n/I18nHeaders.astro"
import { getLanguageFromUrl } from "@i18n/utils"

interface Props {
  title: string
}

const lang = getLanguageFromUrl(Astro.url)
---

<html lang={lang}>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<link rel="shortcut icon" href="/favicon.svg" type="image/x-icon" />
		<title>{Astro.props.title}</title>
		<I18NHeaders />
	</head>
	<body>
		<slot />
	</body>
</html>
\`\`\`

## Páginas

### \`index.astro\`

Como comenté al principio, este sistema no está configurado para que la ruta raiz sea el idioma predeterminado, por lo tanto hay que redirigir al usuario añadiendo lo siguiente en \`src/pages/index.astro\`:

\`\`\`astro
---
import { DEFAULT_LANGUAGE } from "@i18n/config"
---

<meta
	http-equiv="refresh"
	content={\`0;url=/\${DEFAULT_LANGUAGE}/\`}
/>
\`\`\`

El problema con esto es que las redirecciones por el lado del cliente son penalizantes para el SEO, por lo que una mejor opción sería usar el modo o \`hybrid\` de Astro y cambiar lo anterior por:

\`\`\`astro
---
import { DEFAULT_LANGUAGE, LANGUAGES } from '@i18n/config'
export const prerender = false

const headers = Object.fromEntries(Astro.request.headers)
const userLanguage =
	headers['accept-language']?
	.split(',')[0]
	.split('-')[0]
const lang =
	userLanguage !== undefined && userLanguage in LANGUAGES
	? userLanguage
	: DEFAULT_LANGUAGE

return Astro.redirect(\`/\${lang}/\`, 301)
---
\`\`\`

### \`[lang]\`

Las páginas para cada idioma se generan gracias a las [rutas dinámicas](https://docs.astro.build/en/core-concepts/routing/#static-ssg-mode) de Astro, lo único malo es que hay que indicar en todas las páginas los idiomas en los que se va ha traducir.

Crea las traducciones en los \`[languages].json\`:

\`\`\`json
{
  "home": {
    "head_title": "Home",
    "title": "Welcome!",
    "subtitle": "This is an Astro test with i18n."
  }
}
\`\`\`

\`\`\`json
{
  "home": {
    "head_title": "Inicio",
    "title": "¡Bienvenido!",
    "subtitle": "Esto es un prueba de Astro con i18n."
  }
}
\`\`\`

\`\`\`json
{
  "home": {
    "head_title": "Début",
    "title": "Accueillir!",
    "subtitle": "Il s'agit d'un test Astro avec i18n."
  }
}
\`\`\`

Crea el directorio \`src/pages/[lang]\`.

\`\`\`
pages/
  index.astro
    [lang]/
\`\`\`

En \`src/pages/[lang]/index.astro\` añade lo siguiente:

\`\`\`astro
---
import BaseLayout from "@layouts/BaseLayout.astro"
import { LANGUAGES_ARRAY, type Lang } from "@i18n/config"
import { useTranslations } from "@i18n/utils"

export const getStaticPaths = () => {
  return LANGUAGES_ARRAY.map((lang) => ({
    params: { lang },
  }))
}

const { lang } = Astro.params
const t = useTranslations(lang as Lang, "home")
---

<BaseLayout title={t().head_title}>
  <h1>{t().title}</h1>
  <p>{t().subtitle}</p>
</BaseLayout>
\`\`\`

Ahora deberías poder ejecutar \`npm run dev\` y tener una página i18n.

Si quieres ver un ejemplo más completo puedes ir a este [repositorio](https://github.com/michelangelo-valderrama/test-astro-i18n/), que tiene un blog y usa traducciones en los componentes.
`}function E(){return a}function h(){return[{depth:2,slug:"configuración-y-utilidades",text:"Configuración y utilidades"},{depth:2,slug:"componentes",text:"Componentes"},{depth:2,slug:"plantillas",text:"Plantillas"},{depth:2,slug:"páginas",text:"Páginas"},{depth:3,slug:"indexastro",text:"index.astro"},{depth:3,slug:"lang",text:"[lang]"}]}const m=n((c,v,r)=>{const{layout:o,...s}=t;return s.file=d,s.url=p,e`${i()}${l(a)}`});export{m as Content,E as compiledContent,m as default,d as file,t as frontmatter,h as getHeadings,A as rawContent,p as url};
